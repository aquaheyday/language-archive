# 📄 분산 데이터베이스 (Distributed Database) 정리

---

## 1️⃣ 분산 데이터베이스란?

**분산 데이터베이스**는 **물리적으로 다른 위치에 있는 여러 노드(서버)** 에 데이터를 저장하고 관리하는 데이터베이스 시스템입니다.

- 사용자 입장에서는 **하나의 데이터베이스처럼 동작**
- 백엔드에서는 여러 서버/노드에서 **데이터를 나눠 저장하고 처리**
- 데이터의 **가용성, 확장성, 장애 대응력**을 높이기 위한 구조

---

## 2️⃣ 주요 목적

| 목적 | 설명 |
|------|------|
| **가용성 향상** | 일부 노드 장애에도 전체 서비스는 정상 동작 |
| **확장성(Scale-out)** | 노드를 추가함으로써 성능, 저장 용량 증가 |
| **성능 향상** | 지리적으로 가까운 노드에서 빠르게 처리 가능 |
| **데이터 지역화** | 지역별 사용자 데이터를 가까운 서버에 저장 가능 |

---

## 3️⃣ 구성 요소

| 구성 요소 | 설명 |
|------------|------|
| **노드(Node)** | 데이터를 저장하고 쿼리를 처리하는 서버 |
| **클러스터(Cluster)** | 여러 노드의 집합 (분산 DB 시스템 전체) |
| **마스터/리더** | 쓰기 처리 및 노드 제어 담당 (선택적으로 존재) |
| **팔로워/슬레이브** | 복제 및 읽기 처리 담당 |

---

## 4️⃣ 분산 방식 유형

| 유형 | 설명 |
|------|------|
| **샤딩(Sharding)** | 데이터를 특정 기준으로 나누어 여러 노드에 저장 (수평 분산) |
| **레플리케이션(Replication)** | 동일 데이터를 여러 노드에 복제하여 저장 (고가용성 확보) |
| **하이브리드** | 샤딩 + 레플리케이션을 함께 사용 |

---

## 5️⃣ 장점과 단점

#### ✅ 장점

- 고가용성 (노드 장애 시에도 운영 가능)
- 수평 확장으로 성능/용량 증가
- 지연 시간 최소화 (지역 분산 처리)
- 장애 복구 및 페일오버 가능

#### ❌ 단점

- 시스템 복잡도 증가
- 네트워크 통신 지연 가능성
- 일관성 유지 어려움 (CAP 이론 영향)
- 트랜잭션 처리 복잡

---

## 6️⃣ CAP 이론과 분산 DB

| 요소 | 설명 |
|------|------|
| **C – Consistency (일관성)** | 모든 노드에 동일한 데이터 보장 |
| **A – Availability (가용성)** | 요청에 항상 응답을 보장 |
| **P – Partition Tolerance (분할 허용성)** | 네트워크 분리 상황에서도 시스템 운영 가능 |

✔ CAP 이론에 따라 **동시에 3가지를 만족하는 분산 시스템은 존재하지 않음**  
✔ 대부분의 분산 DB는 **AP** 또는 **CP** 중 하나 선택

---

## 7️⃣ 대표 분산 데이터베이스

| DBMS | 특징 |
|------|------|
| **Apache Cassandra** | AP 지향, 마스터리스 구조, 높은 쓰기 성능 |
| **MongoDB** | 샤딩 + 복제 지원, 문서 기반 |
| **CockroachDB** | SQL 기반 CP 지향 분산 DB |
| **Amazon DynamoDB** | 완전 관리형 NoSQL, AP 지향 |
| **TiDB** | MySQL 호환, HTAP 지원, CP 기반 |
| **Google Spanner** | 글로벌 트랜잭션 지원, CP 지향 |

---

## 🎯 정리

✔ 분산 DB는 여러 서버에 데이터를 분산 저장해 **가용성, 확장성, 장애 대응력**을 확보  
✔ 샤딩, 레플리케이션 등 다양한 분산 전략 존재  
✔ CAP 이론을 이해하고 목적에 맞는 구조 선택 필요  
✔ Cassandra, MongoDB, Spanner 등 다양한 솔루션 존재

