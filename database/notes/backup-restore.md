# 📄 데이터베이스 백업 & 복구 (Backup & Recovery)

---

## 1️⃣ 백업(Backup)이란?

데이터베이스의 **데이터와 메타정보를 외부 저장소에 보관**하는 것  
✔ 시스템 장애, 사용자 실수, 데이터 손상 시 복구를 위해 사용  

---

## 2️⃣ 복구(Recovery)란?

백업된 데이터를 이용해 **기존 상태 또는 원하는 시점으로 데이터베이스를 복원**하는 작업

---

## 3️⃣ 백업의 종류

#### 방식 기준
| 종류 | 설명 |
|------|------|
| **논리적 백업** | SQL 덤프 등으로 데이터를 내보내는 방식 (예: `mysqldump`) |
| **물리적 백업** | 데이터 파일 자체를 복사 (예: 디스크 스냅샷) |

#### 범위 기준
| 종류 | 설명 |
| **전체 백업 (Full Backup)** | 전체 데이터베이스를 백업 |
| **차등 백업 (Differential)** | 마지막 전체 백업 이후 변경된 데이터만 백업 |
| **증분 백업 (Incremental)** | 마지막 백업 이후 변경된 데이터만 백업 |

#### 시점 기준
| 종류 | 설명 |
|------|------|------|
| **정기 백업** | 매일/매주 등 주기적으로 백업 수행 |
| **실시간 백업** | 트랜잭션 로그를 실시간 저장 |

---

## 4️⃣ 복구의 종류

| 유형 | 설명 | 예시 |
|------|------|------|
| **전체 복구 (Full Restore)** | 전체 백업본을 사용해 복원 | 장애 발생 시 전체 복구 |
| **시점 복구 (Point-in-Time Recovery)** | 특정 시점까지 데이터 복원 | 실수로 DROP 한 직전 시점 복원 |
| **부분 복구** | 일부 테이블/스키마만 복원 | 특정 데이터만 손실된 경우 |

---

## 5️⃣ 데이터베이스별 백업 도구 예시

| DBMS | 백업 도구 | 복구 도구 |
|------|-----------|------------|
| MySQL | `mysqldump`, `xtrabackup` | `mysql`, `mysqlimport` |
| PostgreSQL | `pg_dump`, `pg_basebackup` | `psql`, `pg_restore` |
| Oracle | RMAN, Data Pump | RMAN, Data Pump |
| MongoDB | `mongodump` | `mongorestore` |
| Redis | RDB, AOF 파일 복사 | 파일 복사 및 재시작 |
| Cassandra | `nodetool snapshot` | snapshot 파일 복사 |

---

## 6️⃣ 백업 전략 수립 시 고려사항

- **백업 주기** (매일, 주간, 실시간 등)
- **보관 기간** (7일, 1개월, 3개월 등)
- **보관 위치** (로컬, NAS, 클라우드, 원격지 등)
- **보안** (암호화 및 접근 제어)
- **복구 테스트** 주기적으로 복구 가능한지 검증 필수

---

## 7️⃣ 백업 vs 복제(Replication)

| 항목 | 백업(Backup) | 복제(Replication) |
|------|--------------|--------------------|
| 목적 | 데이터 복원 | 고가용성, 무중단 서비스 |
| 방식 | 외부 저장소에 보관 | 실시간 다른 서버로 복제 |
| 복구 가능성 | 과거 시점까지 복구 가능 | 실시간 동기화만 가능 |
| 예시 | `mysqldump`, `pg_dump` | Master-Slave, Replica Set 등 |

---

## 🎯 정리

✔ **백업은 데이터의 최후 보루**, 주기적 수행 필수  
✔ **복구는 실제 위기 상황에서 데이터 생존을 책임지는 작업**  
✔ 논리/물리, 전체/증분/차등 등 다양한 전략이 존재  
✔ 복구 시점, 속도, 안정성까지 고려해 전략 수립 필요

