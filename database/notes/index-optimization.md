# 📄 Database 인덱스와 성능 최적화 (Index & Performance Optimization)

---

## 1️⃣ Index 개념

인덱스는 테이블 내의 데이터를 빠르게 조회하기 위한 자료구조입니다.  
일반적으로 B-Tree나 Hash 기반으로 구성되어 있습니다.  

| 인덱스 종류 | 설명 |
|-------------|------|
| **기본 인덱스 (Primary Index)** | 기본 키에 자동 생성되는 인덱스 |
| **보조 인덱스 (Secondary Index)** | 기본 키 이외의 컬럼에 생성하는 인덱스 |
| **유니크 인덱스 (Unique Index)** | 중복되지 않는 값을 강제하는 인덱스 |
| **복합 인덱스 (Composite Index)** | 둘 이상의 컬럼을 조합한 인덱스 |
| **풀텍스트 인덱스 (Full-text Index)** | 텍스트 검색에 특화된 인덱스 |
| **해시 인덱스 (Hash Index)** | 정확한 일치 조건에 빠른 검색 (일부 DB만 지원) |

---

## 2️⃣ 인덱스 활용

### 1) `CREATE INDEX`  
인덱스를 수동으로 생성할 때 사용하는 명령어입니다.

#### ✅ 인덱스 생성
```sql
CREATE INDEX idx_user_name ON users(name);
```
✔ `idx_user_name` → `users` 테이블의 `name` 컬럼에 인덱스를 생성합니다.

#### ❌ 인덱스 삭제
```sql
DROP INDEX idx_user_name;
```

---

## 3️⃣ 플랫폼별 인덱스 지원

| DBMS | 인덱스 지원 | 비고 |
|------|--------------|------|
| MySQL | ✅ 완전 지원 | B-Tree, Full-text, Hash 등 |
| PostgreSQL | ✅ 완전 지원 | B-Tree, Hash, GIN, GiST |
| SQLite | ✅ 부분 지원 | 기본 인덱스 위주 지원 |
| MongoDB | ✅ 완전 지원 | 복합 인덱스, 텍스트 인덱스 지원 |

---

## 4️⃣ 인덱스 성능 최적화

인덱스는 검색 성능을 높여주지만, **쓰기 성능 저하**와 **디스크 사용 증가**의 단점이 있습니다.  

### 인덱스 설계 시 고려사항
- **자주 검색되는 컬럼**에 인덱스 적용
- **WHERE, JOIN, ORDER BY, GROUP BY** 등에 사용되는 컬럼 중심
- **데이터 분포가 고르게 되어 있는 컬럼** 우선
- **불필요한 인덱스 남발 금지** (쓰기 성능 저하)

---

## 5️⃣ 실행 계획(Execution Plan) 확인

쿼리 실행 전에 DB가 어떻게 처리할지 미리 보여주는 기능입니다.  
인덱스가 잘 적용되었는지 확인할 수 있습니다.

```sql
EXPLAIN SELECT * FROM users WHERE name = 'Alice';
```

✔ `type`, `key`, `rows` 등을 통해 인덱스 사용 여부 확인 가능

---

## 6️⃣ 인덱스 튜닝 순서

1. **슬로우 쿼리 로그** 분석  
2. **실행 계획(Explain)** 확인  
3. **적절한 인덱스 생성**  
4. **불필요한 인덱스 제거**  
5. **정기적인 인덱스 리빌드/리오가나이즈**

---

## 🎯 정리

✔ 인덱스는 빠른 검색을 위한 핵심 도구  
✔ 너무 많은 인덱스는 오히려 성능 저하  
✔ 쿼리 실행 계획으로 인덱스 적용 여부 반드시 체크  
✔ 실제 사용되는 쿼리에 기반한 인덱스 설계 필요
