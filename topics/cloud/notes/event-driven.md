# 🧭 클라우드 아키텍처 - Event-driven Architecture

**Event-driven Architecture(EDA)** 는 시스템 구성 요소들이 **이벤트(발생한 사실)** 를 기반으로 느슨하게 연결되어 비동기적으로 동작하는 아키텍처입니다.  
모듈 간 강한 결합 없이 데이터를 전달하고, 자동 반응하는 시스템을 구성할 수 있습니다.

---

## 1️⃣ 이벤트 기반 아키텍처란?

| 항목     | 설명 |
|----------|------|
| **정의** | 애플리케이션 내에서 **어떤 일이 발생했는지(Event)** 를 기반으로 흐름이 이어지는 아키텍처 |
| **핵심 개념** | "누가 무엇을 했는가?"에 따라 **리스너가 반응**하는 구조 |
| **특징** | 비동기 처리, 느슨한 결합, 확장성 높은 시스템 설계 가능 |

---

## 2️⃣ 구성 요소

| 구성 요소      | 역할 |
|----------------|------|
| **이벤트**      | "무엇이 일어났다"는 사실 (예: 주문 완료, 사용자 가입 등) |
| **이벤트 생성자 (Producer)** | 이벤트를 발생시키는 주체 |
| **이벤트 브로커 (Broker)** | 이벤트를 전달/중계하는 메시징 시스템 (예: Kafka, SNS 등) |
| **이벤트 소비자 (Consumer)** | 이벤트를 수신하고 처리하는 주체 |

---

## 3️⃣ 구조 흐름 예시

```text
[주문 시스템] (Producer)
   ↓ 주문 완료 이벤트 전송
[Kafka / SNS] (Broker)
   ↓
[알림 시스템] (Consumer 1) → SMS 전송  
[포인트 시스템] (Consumer 2) → 적립 처리  
[배송 시스템] (Consumer 3) → 출고 시작
```

> 하나의 이벤트가 여러 시스템에 **비동기적으로 전파**됨  
> 각 컴포넌트는 **독립적으로 확장/배포** 가능

---

## 4️⃣ 메시징 방식: Pub/Sub vs 큐

| 방식        | 설명 |
|-------------|------|
| **Queue**   | 한 Consumer가 하나의 메시지를 가져감 (Work Queue) |
| **Pub/Sub** | 하나의 메시지를 여러 Consumer가 동시에 수신 |
| **예시**    | SQS(Queue), Kafka/SNS(Pub/Sub) 등 |

---

## 5️⃣ 장점과 단점

| 항목       | 장점                                     | 단점                                     |
|------------|------------------------------------------|------------------------------------------|
| 구조       | 느슨한 결합 → 유연한 확장 가능              | 복잡성 증가 (흐름 추적 어려움)              |
| 성능       | 비동기 처리 → 빠른 응답, 높은 처리량          | 처리 순서 보장 어려움 (이벤트 순서 문제)     |
| 유지보수   | 독립적 배포/수정 가능                         | 디버깅/모니터링 어려움                      |
| 복원력     | 재시도, DLQ(Dead Letter Queue) 구성 가능 | 중복 처리/중복 수신 관리 필요               |

---

## 6️⃣ 실전 활용 예시

| 사용 사례                        | 설명 |
|----------------------------------|------|
| 회원 가입 → 이메일 인증 발송         | 가입 이벤트 발생 → 알림 시스템 트리거 |
| 주문 완료 → 포인트 적립 + 배송 시작   | 주문 서비스 → 이벤트 브로커 → 두 시스템 동시 처리 |
| IoT 센서 데이터 수집 → 분석         | 센서 이벤트 → 스트리밍 처리 → 대시보드 표시 |
| 마이크로서비스 간 연결             | 서비스 간 직접 호출 대신 이벤트로 상태 공유 |

---

## 🎯 정리 요약

✔ **Event-driven Architecture**는 시스템을 이벤트 흐름으로 설계하여 **비동기 처리, 확장성, 유연성**을 확보할 수 있는 구조  
✔ 핵심 구성: **Producer, Broker, Consumer**  
✔ Kafka, SNS, SQS, EventBridge 등 다양한 메시징 도구 사용  

