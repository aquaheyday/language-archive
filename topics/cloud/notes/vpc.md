# 🧭 클라우드 인프라 - 네트워크 구성 (VPC)

**VPC(Virtual Private Cloud)** 는 퍼블릭 클라우드 안에서 **논리적으로 분리된 가상 네트워크 공간**입니다.  
서브넷, 라우팅, 방화벽 규칙 등을 설정하여 **온프레미스처럼 네트워크를 직접 설계**할 수 있습니다.

---

## 1️⃣ VPC란?

| 항목     | 설명 |
|----------|------|
| **정의** | 퍼블릭 클라우드 내에서 사용자가 직접 구성하는 **격리된 가상 네트워크** |
| **기능** | IP 주소 할당, 서브넷 구성, 보안 설정, 라우팅 테이블 등 직접 제어 가능 |
| **목적** | 클라우드 환경에서도 **보안성과 유연성을 가진 네트워크 인프라 구성** |

---

## 2️⃣ VPC의 주요 구성 요소

| 구성 요소         | 설명 |
|------------------|------|
| **서브넷(Subnet)** | VPC 내부에서 논리적으로 나눈 네트워크 구역 (퍼블릭/프라이빗) |
| **라우팅 테이블**   | 어떤 네트워크로 요청을 보낼지 정의 |
| **인터넷 게이트웨이(IGW)** | 퍼블릭 인터넷과 연결되는 출입구 |
| **NAT 게이트웨이**   | 프라이빗 서브넷에서 인터넷으로 나갈 수 있게 해줌 |
| **보안 그룹(SG)**    | 인스턴스 단위의 방화벽 역할 (인바운드/아웃바운드 허용) |
| **네트워크 ACL**    | 서브넷 단위의 네트워크 접근 제어 (리눅스 iptables 느낌) |

---

## 3️⃣ 기본 VPC 구성 예시

```text
[VPC]
 ├── [퍼블릭 서브넷]
 │    ├── EC2 인스턴스
 │    └── 인터넷 게이트웨이 (IGW)
 │
 └── [프라이빗 서브넷]
      ├── EC2 (DB, 내부 서버)
      └── NAT 게이트웨이 → 퍼블릭 서브넷 경유로 인터넷 접속
```

---

## 4️⃣ 퍼블릭 vs 프라이빗 서브넷 차이

| 구분           | 퍼블릭 서브넷              | 프라이빗 서브넷            |
|----------------|-----------------------------|-----------------------------|
| 인터넷 연결     | 가능 (IGW 연결됨)            | 직접 연결 불가 (NAT 필요)   |
| 주 용도         | 웹 서버, 프록시 서버 등 외부 노출 | DB 서버, 내부 앱, 민감 자원 |
| 보안 설정       | 제한적                        | 강력한 내부망 구성 가능     |

---

## 5️⃣ 실전 활용 예시

| 용도           | 설명 |
|----------------|------|
| 웹 서비스 구성   | 웹 서버는 퍼블릭 서브넷, DB는 프라이빗 서브넷 배치 |
| 사내망 연동     | 온프레미스와 VPN으로 연결하여 하이브리드 구성 |
| 보안 격리 환경   | VPC 피어링, 서브넷 분할로 프로젝트별 격리 운영 |
| 비용 최적화     | 프라이빗 서브넷에서 NAT 인스턴스 직접 운영 |

---

## 🎯 정리 요약

✔ **VPC는 클라우드에서 사용하는 논리적 네트워크 공간**  
✔ 퍼블릭과 프라이빗 서브넷을 나누고, 보안 그룹과 ACL로 접근 제어  
✔ 인터넷 게이트웨이, NAT 게이트웨이, 라우팅 설정 등은 **온프레미스 수준의 제어권 제공**  
✔ 서비스 규모와 보안 요구에 따라 유연한 네트워크 설계 가능

