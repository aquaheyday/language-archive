# 🧭 클라우드 아키텍쳐 - CSPM vs CWPP

클라우드 환경에서 **보안 구성과 워크로드 보호를 자동화**하기 위한 대표적인 기술이 **CSPM(Cloud Security Posture Management)** 과 **CWPP(Cloud Workload Protection Platform)** 입니다.  
각각의 역할과 범위를 이해하면 클라우드 보안을 훨씬 효율적으로 설계할 수 있습니다.

---

## 1️⃣ 개념 정의

| 항목   | 설명 |
|--------|------|
| **CSPM** | 클라우드 환경의 설정 오류, 보안 정책 위반 등을 탐지하고 시정하는 구성 보안 도구 |
| **CWPP** | EC2, 컨테이너, 서버리스 등 워크로드에 대한 실행 시점 보안을 제공하는 플랫폼 |

---

## 2️⃣ 비교 표 (CSPM vs CWPP)

| 항목            | CSPM                                             | CWPP                                             |
|-----------------|--------------------------------------------------|--------------------------------------------------|
| 목적            | 설정/정책 기반의 보안 위험 탐지 및 예방                | 실행 중인 워크로드(인스턴스, 컨테이너 등) 보호       |
| 대상 리소스       | IAM, S3, VPC, RDS, 보안 그룹 등 클라우드 리소스 구성     | EC2, ECS, Lambda, Docker, Kubernetes 등 실행 환경 |
| 동작 시점        | **구성 단계** (정적 분석, 설정 확인)                    | **실행 시점** (동적 분석, 런타임 보호)              |
| 주요 기능        | 미스 설정 탐지, 정책 위반 감지, 컴플라이언스 리포팅       | 취약점 검사, 런타임 위협 탐지, 악성 행위 차단          |
| 적용 환경        | 퍼블릭 클라우드 전반 (AWS, GCP, Azure 등)               | 하이브리드 환경 포함 (온프레미스 + 클라우드 워크로드) |
| 예시 도구        | AWS Security Hub, Prisma Cloud (CSPM 모듈), Wiz        | Trend Micro Deep Security, Aqua Security, Prisma CWPP |

---

## 3️⃣ 구성 요소별 보안 범위

```text
[클라우드 인프라]
 ├── IAM, S3, VPC, 설정 등  → CSPM
 └── EC2, 컨테이너, Lambda 등 → CWPP
```

---

## 4️⃣ 실제 사용 시나리오

| 상황                                       | 도입 대상 |
|--------------------------------------------|-----------|
| S3 버킷이 퍼블릭으로 열려 있음                       | CSPM      |
| 컨테이너 런타임 중 이상한 프로세스가 실행됨                | CWPP      |
| 클라우드 리소스가 기업 보안 정책 위반 상태로 생성됨         | CSPM      |
| EC2 인스턴스에서 악성 스크립트가 실행됨                   | CWPP      |
| PCI-DSS, HIPAA 등 컴플라이언스 점검이 필요함               | CSPM      |
| Kubernetes Pod에서 파일 시스템 무단 접근이 탐지됨          | CWPP      |

---

## 5️⃣ CSPM + CWPP 함께 쓰는 이유

- **CSPM** → 구성 오류 예방  
- **CWPP** → 런타임 위협 대응

> 단독으로는 보안 커버리지에 한계가 있으므로, **두 기술을 병행하여 클라우드 환경 전체에 대한 입체적인 보안 확보**가 중요

---

## 🎯 정리 요약

✔ **CSPM**: 클라우드 구성 상태를 점검하고 **정책 위반/설정 오류를 예방**  
✔ **CWPP**: 실행 중인 워크로드를 보호하며 **취약점, 악성 행위 탐지** 수행  
✔ 둘 다 클라우드 보안의 핵심 영역이며 **서로를 보완적으로 사용하는 것이 베스트 프랙티스**
