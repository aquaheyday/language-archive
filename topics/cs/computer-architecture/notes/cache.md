# 🧠 Computer Architecture - 캐시 메모리 (Cache Memory)

**캐시 메모리(Cache Memory)** 는 **CPU와 메인 메모리 사이에서 속도 차이를 줄이기 위한 고속 임시 저장 장치**입니다.

> 자주 사용되는 데이터를 빠르게 접근할 수 있도록 **작고 빠른 메모리**를 CPU 가까이에 두는 구조

---

## 1️⃣ 캐시 메모리란?

- **CPU의 연산 속도**와 **메인 메모리 접근 속도**의 차이를 완화  
- 최근 사용되었거나 가까운 데이터를 임시 저장하여 **데이터 접근 속도 향상**  
- **SRAM** 기반으로, DRAM보다 빠르지만 비싸고 용량은 작음

---

## 2️⃣ 캐시 메모리의 계층 구조

| 계층        | 위치                 | 특징                          |
|-------------|----------------------|-------------------------------|
| **L1 캐시** | CPU 코어 내부        | 가장 빠르고 작음 (수십 KB)     |
| **L2 캐시** | CPU 코어 내부/근처   | L1보다 느리지만 큼 (수백 KB~MB) |
| **L3 캐시** | CPU 전체에서 공유    | 가장 느리지만 가장 큼 (수 MB+) |

> 일부 고성능 CPU는 **L4 캐시**까지 존재하기도 함

---

## 3️⃣ 캐시 메모리의 작동 원리

- **CPU가 데이터를 요청**하면,  
  1. 먼저 **L1 캐시에서 검색**  
  2. 없으면 **L2 → L3** 순으로 찾음  
  3. 최종적으로 **메인 메모리에서 가져옴**
- 찾은 데이터는 **상위 캐시에 저장**해두고 다음 요청 시 빠르게 처리

---

## 4️⃣ 지역성(Locality)의 활용

| 지역성 개념   | 설명                                     |
|--------------|------------------------------------------|
| **시간 지역성** | 최근 사용된 데이터가 다시 사용될 가능성 ↑ |
| **공간 지역성** | 인접 주소의 데이터가 함께 사용될 가능성 ↑ |

> 캐시는 이 두 가지 지역성을 기반으로 데이터 예측 및 저장 전략을 수행함

---

## 5️⃣ 캐시의 적중(Hit)과 실패(Miss)

| 용어               | 설명                                     |
|--------------------|------------------------------------------|
| **캐시 히트**       | 요청한 데이터가 캐시에 존재할 때         |
| **캐시 미스**       | 요청한 데이터가 캐시에 없을 때 (하위 계층에서 가져옴) |

---

## 6️⃣ 캐시 설계의 주요 요소

| 요소                   | 설명                                                         |
|------------------------|--------------------------------------------------------------|
| **블록 크기**            | 캐시에 저장되는 데이터 단위 (Line)                             |
| **연관도 (Associativity)** | 특정 데이터가 캐시의 어디에 저장될 수 있는지 결정 (직접 매핑, 세트 연관 등) |
| **교체 정책**            | 캐시가 가득 찼을 때 어떤 데이터를 버릴지 결정 (LRU, FIFO 등)      |
| **쓰기 정책**            | CPU가 데이터를 수정할 때의 처리 방식 (Write-through, Write-back 등) |

---

## 7️⃣ 캐시와 성능의 관계

- **캐시 적중률(Hit Rate)** 이 높을수록 성능 향상  
- **미스율(Miss Rate)** 이 높을 경우, 병목 발생  
- **파이프라인 효율성**, **메모리 계층 구조 최적화**에 결정적 역할

---

## 🎯 정리 요약

✔ **캐시 메모리**는 CPU 근처에 있는 **고속 임시 메모리**  
✔ **속도와 성능 향상**을 위한 핵심 구성 요소  
✔ **지역성(Locality)** 을 이용해 데이터 접근을 예측  
✔ **L1 → L2 → L3 캐시 순서로 구성**되어 있으며  
✔ 적중률(Hit Rate)을 높이는 것이 **성능 향상의 핵심 전략**
