# 🏭 Computer Architecture - 파이프라인(Pipelining)이란?

**파이프라인(Pipelining)** 은 **CPU가 여러 명령어를 겹쳐서 실행**해, 전체 처리 속도를 향상시키는 기법입니다.  
> 마치 공장에서 여러 작업자가 동시에 다른 단계의 작업을 수행하는 방식!

---

## 1️⃣ 파이프라인의 정의

- 명령어 수행 과정을 여러 단계로 분할하고  
- 각 단계를 병렬로 실행하여 **처리율(Throughput)** 향상  
- CPU가 **여러 명령어를 동시에 처리**할 수 있게 함

---

## 2️⃣ 파이프라인의 주요 단계 (명령어 사이클 분할)

| 단계        | 설명 |
|-------------|------|
| **IF (Fetch)**     | 메모리에서 명령어 가져오기 |
| **ID (Decode)**    | 명령어 해석 및 오퍼랜드 추출 |
| **EX (Execute)**   | ALU를 통해 연산 수행 |
| **MEM (Memory)**   | 메모리 접근 (로드/스토어) |
| **WB (Write Back)**| 결과를 레지스터에 저장 |

> 5단계 파이프라인이 기본이며, CPU에 따라 더 세분화되기도 함

---

## 3️⃣ 파이프라이닝의 장점

| 장점                 | 설명 |
|----------------------|------|
| 명령어 처리 속도 향상 | 동시에 여러 명령어 실행 가능 |
| CPU 자원 활용 극대화  | 각 하드웨어 유닛이 쉬지 않고 계속 동작 |
| 처리율(Throughput) 증가 | 초당 실행 가능한 명령어 수 증가 |

---

## 4️⃣ 파이프라인의 한계점 (Hazard 발생)

파이프라이닝에는 **병렬 처리로 인한 충돌(Hazard)** 문제가 존재

| 종류         | 설명 |
|--------------|------|
| **구조적 Hazard** | 하드웨어 자원 충돌 (예: 하나뿐인 메모리를 동시에 접근) |
| **데이터 Hazard** | 이전 명령어의 결과가 아직 준비되지 않았을 때 |
| **제어 Hazard**   | 분기 명령어로 인해 실행 경로가 바뀔 때 (예: if, loop) |

---

## 5️⃣ Hazard 해결 기법

| 문제 종류     | 해결 기법 예시 |
|---------------|----------------|
| 구조적 Hazard | 하드웨어 분리 (예: 분리된 명령어/데이터 메모리) |
| 데이터 Hazard | **포워딩(Forwarding)**, **스톨(Stall)** |
| 제어 Hazard   | **분기 예측(Branch Prediction)**, **딜레이 슬롯** 사용 |

---

## 6️⃣ 슈퍼스칼라와 파이프라인 차이

| 항목          | 파이프라인          | 슈퍼스칼라(Superscalar) |
|---------------|----------------------|---------------------------|
| 처리 방식     | 명령어를 여러 단계로 분리하여 순차 처리 | 여러 명령어를 동시에 실행 (병렬 처리) |
| 초점         | 단계 분할            | 병렬 실행 유닛 사용         |
| 예시          | 5단계 파이프라인     | 2개 이상 명령어를 동시에 실행 |

---

## 🎯 정리 요약

✔ **파이프라이닝(Pipelining)** 은 CPU 명령어를 여러 단계로 나눠 **동시에 실행**  
✔ 처리 속도와 처리율을 향상시켜 **성능 최적화**  
✔ **Hazard(충돌)** 문제가 있으며, 이를 해결하기 위한 다양한 기법이 존재  
✔ 슈퍼스칼라 구조와 함께 사용 시 더 강력한 병렬 성능 발휘
