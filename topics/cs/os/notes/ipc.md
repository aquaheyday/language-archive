# 🔗 프로세스 간 통신 (IPC: Inter-Process Communication)

**IPC는 서로 다른 프로세스가 데이터를 주고받을 수 있도록 하는 메커니즘입니다.  
운영체제는 각 프로세스를 고립된 공간에 실행시키기 때문에, 직접적으로 데이터를 공유하지 못합니다.  
이를 해결하기 위해 다양한 IPC 방식이 제공됩니다.**

---

## 1️⃣ IPC가 필요한 이유

| 항목         | 설명 |
|--------------|------|
| 데이터 교환    | 서로 다른 프로세스 간에 정보 전달 |
| 자원 공유      | 데이터를 효율적으로 나누어 사용 |
| 동기화        | 프로세스 실행 순서 제어 필요 시 |
| 성능 향상      | 병렬 처리 시 효율적 처리 가능 |

---

## 2️⃣ IPC의 주요 방식

| 방식            | 설명 |
|-----------------|------|
| **파이프 (Pipe)**         | 단방향 데이터 통신 (부모 ↔ 자식 간 주로 사용) |
| **FIFO (Named Pipe)**     | 이름 있는 파이프, 비연관 프로세스 간 통신 가능 |
| **메시지 큐 (Message Queue)** | 메시지를 큐에 저장하고 읽는 방식, 순서 보장 |
| **공유 메모리 (Shared Memory)** | 메모리 영역을 공유, 속도 빠름, 동기화 필요 |
| **세마포어 (Semaphore)**   | 공유 자원 접근 제어를 위한 동기화 도구 |
| **소켓 (Socket)**         | 네트워크 기반 통신, 로컬 or 원격 프로세스 모두 사용 가능 |

---

## 3️⃣ IPC 방식 상세 비교

| 방식             | 방향성     | 속도   | 사용 용도            | 동기화 필요성 |
|------------------|------------|--------|----------------------|----------------|
| 파이프 (Pipe)     | 단방향     | 보통   | 부모-자식 간 통신     | 낮음           |
| FIFO              | 단방향     | 보통   | 이름 기반, 넓은 범위 | 낮음           |
| 메시지 큐         | 양방향 가능 | 중간   | 구조적 메시지 전송    | 중간           |
| 공유 메모리       | 양방향     | 매우 빠름 | 대용량 데이터 공유     | **높음**        |
| 세마포어          | 제어용     | 느림   | 동기화 / 자원 제어     | -              |
| 소켓              | 양방향     | 느림~빠름 | 원격 통신, 서버-클라이언트 | 중간           |

---

## 4️⃣ 예시: 파이프(pipe)

```c
#include <unistd.h>
#include <stdio.h>

int main() {
    int fd[2];
    pipe(fd); // fd[0] = read, fd[1] = write
    if (fork() == 0) {
        close(fd[0]);
        write(fd[1], "hello", 5);
    } else {
        char buf[6] = {0};
        close(fd[1]);
        read(fd[0], buf, 5);
        printf("parent received: %s\n", buf);
    }
    return 0;
}
```

---

## 5️⃣ 예시: 공유 메모리 + 세마포어 (개념)

- **공유 메모리**: `shmget`, `shmat`, `shmdt`, `shmctl`
- **세마포어**: `semget`, `semop`, `semctl`

> 공유 메모리는 빠르지만, 동시에 접근할 경우 **세마포어 같은 동기화 수단**이 반드시 필요함

---

## 6️⃣ 소켓을 활용한 IPC

- 로컬 소켓 (`AF_UNIX`) → 같은 시스템 내 IPC
- 네트워크 소켓 (`AF_INET`) → 원격 시스템 간 IPC
- 서버/클라이언트 구조로 유연하게 통신 가능

---

## 🎯 정리 요약

✔ IPC는 **서로 다른 프로세스 간 데이터 교환**을 위한 핵심 기술  
✔ 다양한 방식이 있으며, 각 방식은 **속도, 방향성, 사용 목적**에 따라 선택  
✔ **공유 메모리**는 가장 빠르지만 **동기화 필요**  
✔ **소켓**은 로컬 뿐만 아니라 **네트워크 IPC도 가능**

