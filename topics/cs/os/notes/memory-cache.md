# ⚡ 캐시 메모리(Cache Memory)

**캐시 메모리는 CPU와 메인 메모리(RAM) 사이에 위치한 고속의 임시 저장장소로,  
자주 접근하는 데이터를 저장하여 속도를 향상**시키는 장치입니다.

---

## 1️⃣ 캐시 메모리란?

| 항목       | 설명 |
|------------|------|
| 정의       | **CPU와 RAM 사이에 위치한 고속 메모리** |
| 목적       | **자주 사용하는 데이터**를 저장해 CPU 접근 속도 향상 |
| 위치       | CPU 내부(L1/L2) 또는 외부(L3) |
| 특징       | 용량 작음, 속도 빠름, 휘발성 |
| 동작 방식   | 최근 접근 데이터를 저장 → 다음에 빠르게 제공 (지역성 활용) |

---

## 2️⃣ 캐시 메모리의 필요성

- CPU는 **RAM보다 훨씬 빠름** → RAM만 쓰면 병목 발생  
- 캐시를 통해 **속도 차이 극복**, 평균 접근 시간 단축  
- 프로그램의 **지역성(Locality)** 원리를 활용  

---

## 3️⃣ 지역성의 원리 (Locality of Reference)

| 유형       | 설명 |
|------------|------|
| **시간 지역성** | 최근 사용된 데이터는 곧 다시 사용될 가능성 ↑ |
| **공간 지역성** | 가까운 메모리 주소도 함께 접근될 가능성 ↑ |

> 캐시는 이 지역성 원리를 활용해 자주 쓰는 데이터를 미리 준비함

---

## 4️⃣ 캐시 메모리의 동작 흐름

```
[ CPU 요청 발생 ]
      ↓
[ 캐시에 있는가?]
      ↓                     ↘
[ 캐시 히트 → 빠르게 제공 ]     [ 캐시 미스 → 메모리에서 데이터 가져옴 → 캐시에 저장 ]
```

- **캐시 히트 (Cache Hit)**: 요청한 데이터가 캐시에 있음  
- **캐시 미스 (Cache Miss)**: 캐시에 없어서 RAM에서 가져와야 함

---

## 5️⃣ 캐시 메모리의 계층 구조 (L1, L2, L3)

| 계층 | 위치       | 속도 | 용량  | 특징 |
|------|------------|------|-------|------|
| L1   | CPU 코어 내부 | 가장 빠름 | 가장 작음 (수십 KB) | 명령/데이터 분리됨 |
| L2   | CPU 코어 내부 | 빠름 | 수백 KB~수 MB | L1보다 큼 |
| L3   | CPU 외부 공유 | 느림 | 수 MB~수십 MB | 여러 코어가 공유 |

---

## 6️⃣ OS와 캐시 메모리

- CPU 캐시는 하드웨어 수준에서 동작 → OS는 **직접 제어하지 않음**
- 하지만 **디스크 캐시, 페이지 캐시 등은 OS 레벨 캐시**임  
  예: 파일 I/O 시 자주 쓰는 데이터를 RAM에 유지해서 속도 향상

| OS 캐시 종류     | 설명 |
|------------------|------|
| **페이지 캐시**     | 페이지 단위로 디스크 내용을 메모리에 저장 |
| **버퍼 캐시**      | 블록 단위로 저장장치 데이터 캐싱 |
| **디스크 캐시**     | 하드디스크에서 읽은 파일 데이터를 RAM에 저장 |
| **네트워크 캐시**   | 네트워크로 받은 데이터 캐싱 |

---

## 7️⃣ 캐시 관련 용어

| 용어         | 설명 |
|--------------|------|
| **캐시 라인(Cache Line)** | 캐시에 저장되는 최소 단위 |
| **교체 알고리즘**         | 캐시가 가득 찼을 때, 어떤 데이터를 버릴지 결정 (LRU, FIFO 등) |
| **쓰기 정책**            | 캐시에만 쓸지(RAM 미갱신) or 동시에 쓸지 (Write-through vs Write-back) |

---

## 8️⃣ 예시 코드 (디스크 캐시 관련)

### Linux에서는 `free -h` 명령으로 확인 가능:

```bash
              total        used        free      shared  buff/cache   available
Mem:           7.7G        1.4G        3.5G        212M        2.7G        5.7G
```

> `buff/cache`: OS가 캐시로 사용 중인 메모리

---

## 🎯 정리 요약

✔ 캐시는 **CPU와 메모리 사이 속도 차이를 줄이기 위한 고속 메모리**  
✔ **시간/공간 지역성**을 활용해 자주 쓰는 데이터를 빠르게 제공  
✔ CPU 캐시는 하드웨어 기반, **디스크 캐시 등은 OS 관리**  
✔ 캐시 히트율을 높이면 성능 ↑, 교체 정책도 중요 (LRU 등)
