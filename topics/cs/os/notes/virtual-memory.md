# 🧠 가상 메모리 (Virtual Memory)

**가상 메모리는 실제 물리적 메모리보다 큰 주소 공간을 프로세스에게 제공하는 기술**입니다.  
프로세스는 자신만의 독립적인 메모리 공간을 사용하는 것처럼 보이며,  
운영체제는 필요한 데이터만 실제 메모리에 적재하면서 메모리를 효율적으로 관리합니다.

---

## 1️⃣ 가상 메모리란?

| 항목       | 설명 |
|------------|------|
| 정의       | **물리 메모리와 독립된 논리적 주소 공간** |
| 목적       | 물리 메모리가 부족해도 더 큰 메모리처럼 사용 가능 |
| 방식       | 필요한 데이터만 메모리에 올리고 나머지는 디스크에 저장 |
| 구성       | **논리 주소(가상 주소)** → **물리 주소**로 매핑됨 (MMU 사용)

---

## 2️⃣ 가상 메모리의 주요 장점

| 항목            | 설명 |
|-----------------|------|
| **프로세스 독립성 제공** | 각 프로세스가 독립된 메모리 공간을 갖는 것처럼 동작 |
| **메모리 효율성 향상**  | 실제로 필요한 부분만 메모리에 올림 (지연 적재) |
| **멀티태스킹 지원**     | 여러 프로그램이 동시에 실행되어도 안정성 보장 |
| **보안성 강화**        | 프로세스 간 메모리 접근 차단 가능 |
| **더 큰 메모리 제공**   | 실제 RAM보다 큰 가상 주소 공간 사용 가능 |

> RAM이 8GB인데, 16GB짜리 프로그램은 어떻게 실행하나 ?
> 한 번에 16GB를 메모리에 올리는 게 아니라, 필요한 부분만 골라서 메모리에 적재하고 나머지는 스왑 스페이스인 디스크(HDD/SSD)에 저장된 채로 기다린다.

---

## 3️⃣ 가상 메모리 동작 원리

1. 프로세스는 가상 주소를 사용
2. **MMU (Memory Management Unit)** 가 해당 주소를 물리 주소로 변환
3. 필요한 데이터가 물리 메모리에 없으면 → **Page Fault** 발생
4. 운영체제가 디스크(보조기억장치)에서 해당 데이터를 메모리로 로드

```text
가상 주소 → 페이지 테이블 → 프레임(물리 주소)  
(없는 경우 → Page Fault → 스왑인)
```

---

## 4️⃣ 페이징(Paging)과 가상 메모리

| 항목       | 설명 |
|------------|------|
| **페이징**   | 가상 주소 공간과 물리 메모리를 고정 크기 단위(페이지)로 나눔 |
| **페이지 테이블** | 가상 페이지와 물리 프레임 매핑 정보를 저장 |
| **Page Fault** | 참조한 페이지가 메모리에 없을 때 발생, 디스크에서 불러옴 |
| **스왑 공간(Swap)** | 디스크의 일부 공간을 RAM처럼 사용하여 페이지 교체 수행 |

---

## 5️⃣ 페이지 교체 알고리즘 (Page Replacement)

| 알고리즘       | 설명 |
|----------------|------|
| **FIFO**        | 가장 오래된 페이지부터 교체 |
| **LRU**         | 가장 오랫동안 사용되지 않은 페이지 교체 |
| **Optimal**     | 앞으로 가장 오래 사용되지 않을 페이지 교체 (이론상 최적) |
| **Clock**       | LRU의 근사값으로 사용되는 원형 알고리즘 |

---

## 6️⃣ 가상 메모리와 성능

| 요소             | 설명 |
|------------------|------|
| **Page Fault Rate** | 낮을수록 좋음, 높으면 속도 저하 |
| **Thrashing**        | 페이지 교체가 너무 자주 일어나 성능 급락 |
| **Working Set**      | 현재 프로세스가 자주 참조하는 페이지 집합, 이를 메모리에 유지하는 것이 중요 |

---

## 🎯 요약 정리

✔ 가상 메모리는 **물리 메모리보다 큰 주소 공간**을 제공해주는 핵심 기술  
✔ **페이징 + 페이지 테이블 + MMU** 조합으로 구현됨  
✔ **Page Fault 발생 시 디스크에서 필요한 데이터 적재**  
✔ 메모리를 효율적으로 관리하고, 보안성과 안정성을 강화  
✔ 교체 알고리즘과 적절한 메모리 설정 없이는 **Thrashing** 발생 가능

