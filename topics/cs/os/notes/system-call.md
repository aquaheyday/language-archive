# 📞 시스템 콜(System Call)

**시스템 콜은 사용자 프로그램이 운영체제의 커널 기능을 요청할 때 사용하는 인터페이스입니다.**  
즉, **사용자 모드(User Mode)** 에서 **커널 모드(Kernel Mode)** 로 전환하여  
파일 읽기, 프로세스 생성, 메모리 할당 등 **하드웨어 자원에 접근**할 수 있게 해줍니다.

---

## 1️⃣ 시스템 콜이란?

| 항목       | 설명 |
|------------|------|
| 정의       | 사용자 프로그램이 커널 기능을 요청하는 **함수 호출 인터페이스** |
| 목적       | **일반 프로그램이 하드웨어 자원을 직접 제어하지 못하도록 보호** |
| 실행 방식   | 유저 모드 → 커널 모드로 전환하여 수행 |
| 예시       | 파일 열기, 읽기, 쓰기, 종료, 메모리 할당 등 |
| 제공 주체   | 운영체제 (커널)에서 제공 |

---

## 2️⃣ 시스템 콜의 필요성

- 사용자 프로그램은 **직접 하드웨어 제어 금지** (보안/안정성)
- 대신 운영체제가 제공하는 **시스템 콜을 통해 우회 접근**
- 프로그램 → 시스템 콜 → 커널 → 하드웨어 자원

---

## 3️⃣ 시스템 콜의 동작 흐름

```
[ 사용자 프로그램 ]
      ↓  (시스템 콜 호출)
[ 유저 모드 → 커널 모드 전환 ]
      ↓
[ 커널이 요청 처리 ]
      ↓
[ 결과 반환 및 모드 복귀 ]
```

> 일반적으로 `int 0x80`, `syscall`, `trap` 등 CPU 명령어를 사용해 커널 모드 진입

---

## 4️⃣ 시스템 콜의 분류

| 분류 유형       | 주요 함수 예시 | 설명 |
|------------------|----------------|------|
| **프로세스 제어**   | fork, exec, wait, exit | 프로세스 생성/제어/종료 |
| **파일 시스템 접근** | open, read, write, close | 파일 열기/읽기/쓰기/닫기 |
| **디바이스 제어**   | ioctl, read, write | I/O 장치 제어 |
| **정보 유지**     | getpid, alarm, sleep | 시간, PID, 상태 등 조회 |
| **통신**         | socket, bind, listen, send, recv | IPC, 네트워크 통신 |

---

## 5️⃣ 언어별 시스템 콜 사용 예시

#### C 언어 (Linux)

```c
#include <unistd.h>
write(1, "Hello\n", 6); // 시스템 콜로 stdout에 출력
```

#### Python

```python
import os
os.write(1, b"Hello\n")  # 저수준 시스템 콜 사용
```

> 고급 언어의 함수들도 내부적으로는 시스템 콜을 사용 (ex. `print()` → `write()`)

---

## 6️⃣ 시스템 콜 vs 일반 함수 호출

| 항목            | 시스템 콜          | 일반 함수 호출      |
|-----------------|--------------------|----------------------|
| 실행 모드        | 커널 모드 전환 필요 | 사용자 모드 내에서 실행 |
| 처리 대상        | 커널 기능, 자원 제어 | 메모리 계산, 내부 로직 등 |
| 오버헤드         | 상대적으로 큼        | 적음 |
| 예시            | `read()`, `fork()`  | `strlen()`, `pow()` |

---

## 🎯 정리 요약

✔ 시스템 콜은 **사용자 프로그램이 OS 커널 기능을 요청**할 수 있는 통로  
✔ 파일 처리, 프로세스 생성, 네트워크 통신 등 대부분의 기능은 시스템 콜 기반  
✔ **User Mode → Kernel Mode** 전환을 통해 보호된 자원에 접근  
✔ 운영체제가 제공하는 **보안성과 안정성 유지**의 핵심 메커니즘
