# 🧠 OS 커널 구조

**운영체제 커널(Kernel)은 하드웨어와 응용 프로그램 사이를 중재하며, 시스템 자원을 효율적으로 관리하는 핵심 구성 요소입니다.**

---

## 1️⃣ OS 커널이란?

| 항목       | 설명 |
|------------|------|
| 정의       | **운영체제의 핵심(Core) 부분**, 하드웨어 자원을 관리하고 시스템 전반을 제어하는 소프트웨어 |
| 목적       | **시스템 자원 관리**와 **프로세스 간의 효율적인 제어 및 보호 제공** |
| 실행 방식   | 항상 메모리에 상주, **커널 모드**에서 실행됨 |
| 예시       | 메모리 관리, 스케줄링, 파일 시스템, I/O 처리 |
| 구성 주체   | OS 내부에서 제공 (Linux, Windows, macOS 등) |

---

## 2️⃣ 커널이 필요한 이유  

- 하드웨어는 복잡하고 위험 → 직접 접근은 비효율적  
- 커널이 대신 자원을 안전하게 **할당/통제/보호**  
- 사용자와 하드웨어 간 **인터페이스 제공자 역할**  
- 시스템 전반의 **일관성과 보안 유지**

---

## 3️⃣ 커널의 동작 흐름  

<pre><code>
[ 사용자 요청 (시스템 콜) ]
         ↓
[ 커널이 요청을 수신 ]
         ↓
[ 메모리/파일/디바이스 등 자원 제어 ]
         ↓
[ 결과 반환 및 사용자 모드 복귀 ]
</code></pre>

> 커널은 사용자 모드에서 발생한 요청을 **커널 모드로 전환**하여 처리

---

## 4️⃣ 커널의 주요 구성 요소  

| 구성 요소             | 역할 |
|----------------------|------|
| **프로세스 관리자**     | 프로세스 생성, 종료, 스케줄링 등 |
| **메모리 관리자**       | 가상 메모리, 페이지 관리, 메모리 보호 |
| **파일 시스템**         | 파일 저장, 읽기, 쓰기, 디렉터리 관리 |
| **장치 드라이버**       | 하드웨어 장치와의 통신을 담당 |
| **시스템 콜 인터페이스** | 사용자와 커널 간의 연결 다리 |
| **네트워크 스택**       | 네트워크 통신 처리 및 인터페이스 제공 |

---

## 5️⃣ 언어별 접근 예시  

#### C 언어 (커널 개발 주 언어)

<pre><code class="language-c">
// 예: 간단한 시스템 콜 함수 (리눅스 커널 내부)
asmlinkage long sys_getpid(void) {
    return current->pid;
}
</code></pre>

#### Python (커널 직접 접근은 제한됨)

<pre><code class="language-python">
import os
print(os.getpid())  # 내부적으로 커널의 getpid 시스템 콜을 호출
</code></pre>

> 고급 언어도 결국 **커널 기능 호출**을 위해 시스템 콜 사용

---

## 6️⃣ 커널 구조의 유형 비교  

| 항목         | 모놀리식 커널 (Monolithic) | 마이크로커널 (Microkernel) |
|--------------|-----------------------------|-----------------------------|
| 구성         | 모든 기능이 하나의 큰 커널에 포함 | 최소한의 기능만 포함, 나머지는 유저 공간에서 작동 |
| 성능         | 빠름 (함수 호출만으로 처리)     | 상대적으로 느림 (IPC 필요) |
| 안정성       | 충돌 시 전체 시스템 영향 가능      | 안정성 높음 (컴포넌트 분리됨) |
| 예시         | Linux, Windows               | MINIX, QNX |

---

## 🎯 정리 요약  

✔ 커널은 **운영체제의 핵심**, 하드웨어와 소프트웨어 사이를 연결하는 중재자  
✔ 자원 관리, 프로세스 제어, 메모리 운영 등 **중추 기능 수행**  
✔ **모드 전환, 시스템 콜, 내부 구성요소 간 협업**으로 운영체제 전체를 제어  
✔ 커널 구조는 **성능 ↔ 안정성의 트레이드오프**에 따라 다양하게 설계됨  
