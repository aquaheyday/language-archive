# 📦 Data Structures - 힙 (Heap)

**힙(Heap)** 은 **완전 이진 트리**를 기반으로 한 **우선순위 큐(Priority Queue)** 구조입니다.  
특정 순서를 유지하면서 **가장 높은(또는 낮은) 우선순위 요소에 빠르게 접근**할 수 있는 자료구조예요.

---

## 1️⃣ 힙의 주요 특징

- **완전 이진 트리**: 왼쪽부터 빈틈없이 채워짐
- **힙 속성 유지**:
  - **최대 힙 (Max Heap)**: 부모 ≥ 자식
  - **최소 힙 (Min Heap)**: 부모 ≤ 자식
- 루트 노드는 항상 **가장 크거나(최대 힙)** 또는 **가장 작음(최소 힙)**

---

## 2️⃣ 힙의 종류

| 종류         | 설명                                        |
|--------------|---------------------------------------------|
| 최대 힙      | 부모 노드 ≥ 자식 노드 (루트가 최댓값)       |
| 최소 힙      | 부모 노드 ≤ 자식 노드 (루트가 최솟값)       |
| 이진 힙      | 이진 트리 기반의 일반적인 힙 구조           |
| 피보나치 힙  | 삽입/합치기 등에 더 효율적인 고급 힙 구조   |
| 다항 힙 (d-힙)| 자식 노드가 d개인 힙 (예: 4-힙 등)          |

---

## 3️⃣ 힙의 주요 연산

| 연산              | 설명                                               |
|-------------------|----------------------------------------------------|
| 삽입 (Insert)     | 맨 끝에 추가한 뒤, 위로 올리며(Heapify-Up) 정렬     |
| 삭제 (Extract)    | 루트 제거 후 마지막 노드를 루트에 옮기고 정렬       |
| Peek (Top)        | 루트(최댓값/최솟값) 확인                           |

---

## 4️⃣ 힙의 삽입 / 삭제 동작

#### 삽입 (Heapify-Up)

1. 새 요소를 맨 끝에 삽입
2. 부모 노드와 비교하며 위로 이동
3. 힙 속성을 만족할 때까지 반복

#### 삭제 (Heapify-Down)

1. 루트 요소 제거
2. 마지막 요소를 루트에 이동
3. 자식과 비교하며 아래로 이동
4. 힙 속성을 만족할 때까지 반복

---

## 5️⃣ 힙의 구현 방식

**배열(Array)** 을 사용한 완전 이진 트리 표현

#### 인덱스 기반 계산:

```
부모 인덱스: i // 2
왼쪽 자식: i * 2
오른쪽 자식: i * 2 + 1
```

#### 0-based 인덱스일 경우:

```
부모: (i - 1) // 2
왼쪽: 2 * i + 1
오른쪽: 2 * i + 2
```

---

## 6️⃣ 파이썬 힙 구현 예시 (heapq - 최소 힙)

```
import heapq

heap = []
heapq.heappush(heap, 3)
heapq.heappush(heap, 1)
heapq.heappush(heap, 5)

print(heapq.heappop(heap))  # 1 (최솟값)
```

#### 최대 힙 구현 방법 (음수 활용):

```
heapq.heappush(heap, -value)
최댓값 = -heapq.heappop(heap)
```

---

## 7️⃣ 시간 복잡도

| 연산         | 시간 복잡도 |
|--------------|--------------|
| 삽입         | O(log n)     |
| 삭제         | O(log n)     |
| Peek(최솟값) | O(1)         |

---

## 8️⃣ 힙 활용 사례

- 우선순위 큐 구현
- **최단 경로 알고리즘 (다익스트라 등)**
- **K번째 최댓값/최솟값** 구하기
- **힙 정렬 (Heap Sort)**
- **실시간 스트리밍 데이터 처리**
- CPU 스케줄링, 네트워크 패킷 처리

---

## 9️⃣ 정리 요약 🎯

✔ 힙은 **우선순위가 가장 높은 요소를 빠르게 접근**할 수 있는 자료구조  
✔ **완전 이진 트리 + 정렬 조건(힙 속성)**  
✔ 삽입/삭제 O(log n), Peek O(1)  
✔ **heapq 모듈**로 최소 힙 기본 제공 (파이썬)  
✔ 알고리즘 문제에서 **최단경로, 정렬, 실시간 데이터 처리** 등에 자주 등장
