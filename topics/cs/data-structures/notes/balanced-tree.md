# ⚖️ Data Structures - 균형 이진 탐색 트리 (AVL, Red-Black Tree)

**균형 이진 탐색 트리(Balanced BST)** 는 삽입/삭제 등의 연산 후에도 **트리의 높이 불균형을 자동으로 조절**하여  
**탐색 시간 복잡도를 O(log n)** 으로 유지하는 고급 자료구조입니다.

> 대표적인 예: **AVL 트리**, **Red-Black 트리**

---

## 1️⃣ 왜 균형이 필요할까?

- 일반 **BST는 한쪽으로 치우칠 경우 O(n)** 까지 성능 저하
- 균형 트리는 **자동으로 회전(Rotation)** 을 통해 균형 유지

```
불균형 BST 예:
    10
      \
      20
        \
        30   → 리스트처럼 변형됨 (O(n))
```

---

## 2️⃣ AVL 트리 (Adelson-Velsky & Landis Tree)

### 특징

- 모든 노드에 대해 **왼쪽·오른쪽 서브트리의 높이 차이 ≤ 1**
- 균형 인수(Height Balance Factor)를 사용
- **삽입/삭제 후 항상 균형 유지 → 매우 엄격한 균형 트리**

### 회전 종류

| 불균형 유형 | 조정 방법       |
|-------------|----------------|
| LL (왼쪽-왼쪽) | 오른쪽 회전 (Right Rotate) |
| RR (오른쪽-오른쪽) | 왼쪽 회전 (Left Rotate) |
| LR (왼쪽-오른쪽) | 왼쪽 회전 후 오른쪽 회전 |
| RL (오른쪽-왼쪽) | 오른쪽 회전 후 왼쪽 회전 |

### 시간 복잡도

| 연산     | 시간 복잡도 |
|----------|--------------|
| 삽입     | O(log n)     |
| 삭제     | O(log n)     |
| 탐색     | O(log n)     |

> 💡 항상 **엄격하게 균형 유지** → 탐색 성능 우수

---

## 3️⃣ Red-Black 트리

### 특징

- 각 노드에 **색상(빨강/검정)** 을 부여해 균형 제어
- **균형 유지 규칙은 느슨하지만**, 삽입/삭제가 더 효율적
- 대부분의 언어 라이브러리(Map/Set)에서 사용됨 (예: Java TreeMap)

### 속성 규칙

1. 노드는 **Red** 또는 **Black**
2. 루트는 항상 **Black**
3. **Red 노드는 자식이 둘 다 Black** 이어야 함
4. 루트에서 리프까지의 **Black 노드 수는 모두 같아야 함**

### 회전 및 색상 조정

- 삽입/삭제 시 필요에 따라 색 변경 + 회전 수행
- 회전 수는 AVL보다 적음 → **성능이 더 안정적**

### 시간 복잡도

| 연산     | 시간 복잡도 |
|----------|--------------|
| 삽입     | O(log n)     |
| 삭제     | O(log n)     |
| 탐색     | O(log n)     |

> 💡 삽입/삭제가 자주 일어나는 경우 유리 (균형 규칙이 유연)

---

## 4️⃣ AVL vs Red-Black 비교

| 항목             | AVL 트리               | Red-Black 트리         |
|------------------|-------------------------|-------------------------|
| 균형 정도         | 더 엄격하게 유지          | 느슨하게 유지             |
| 회전 횟수         | 더 많음                 | 더 적음                 |
| 탐색 속도         | 더 빠름 (낮은 높이 유지) | 약간 느림 (높이 ↑)       |
| 삽입/삭제 성능    | 느릴 수 있음             | 더 효율적                |
| 사용 사례         | DB 인덱스 등 탐색 중심     | Java/C++의 Set/Map 등    |

---

## 5️⃣ 활용 사례

- **AVL 트리**
  - 빠른 탐색이 중요한 환경
  - DB 인덱스, 캐시 저장소 등

- **Red-Black 트리**
  - 삽입/삭제가 자주 일어나는 경우
  - Java `TreeMap`, C++ `std::map`, `std::set` 등

---

## 6️⃣ 정리 요약 🎯

✔ **균형 BST** 는 트리의 높이를 제한하여 **O(log n)** 성능 유지  
✔ **AVL 트리**: 탐색 최적, 회전 많음  
✔ **Red-Black 트리**: 삽입/삭제 효율적, 표준 라이브러리에서 사용  
✔ 상황에 따라 적절한 균형 트리 선택 필요
