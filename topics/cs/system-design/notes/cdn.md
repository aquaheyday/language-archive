# 🧭 시스템 설계 - CDN (Content Delivery Network) 적용

**CDN (Content Delivery Network)** 은 전 세계에 분산된 서버 네트워크를 통해 사용자에게 **더 빠르고 안정적인 콘텐츠 제공**을 가능하게 해주는 기술입니다.  
웹 페이지, 이미지, 영상, 파일 등 **정적 콘텐츠**를 효율적으로 제공할 수 있도록 설계됩니다.

---

## 1️⃣ CDN이란?

| 항목     | 설명 |
|----------|------|
| **정의** | 콘텐츠를 사용자와 가까운 위치의 서버에서 제공해 **지연 시간(latency)** 을 줄이는 네트워크 구조 |
| **목적** | 빠른 응답 속도, 서버 부하 감소, 글로벌 콘텐츠 전달 최적화 |
| **주요 대상** | 이미지, CSS/JS, 동영상, 파일 다운로드 등 **정적 콘텐츠** |

---

## 2️⃣ CDN의 동작 원리

1. 사용자가 웹사이트에 접속
2. DNS 또는 HTTP 요청이 **가장 가까운 CDN 서버(PoP, Point of Presence)** 로 라우팅됨
3. 해당 CDN 서버에 콘텐츠가 **캐시되어 있다면 즉시 제공**
4. 캐시에 없다면 **원본 서버로 요청 → 받아온 후 사용자에게 전달 + 캐싱**

---

## 3️⃣ CDN 구조 예시

```
[사용자]
    │
    ▼
[가장 가까운 CDN 노드] ◀ 캐시 있음 → 바로 응답
    │
    ▼
[원본 서버] (오리진) → 캐시에 저장 → 다음부터 빠르게 응답
```

---

## 4️⃣ CDN의 장점

| 장점                     | 설명 |
|--------------------------|------|
| ✅ 지연 시간 감소         | 사용자와 가까운 서버에서 콘텐츠 제공 |
| ✅ 서버 부하 분산         | 원본 서버로의 요청 수 줄어듦 |
| ✅ 대규모 트래픽 대응     | 전 세계에 걸친 분산 구조로 고트래픽 대응 |
| ✅ 보안 기능 제공         | DDoS 방어, HTTPS, TLS 오프로딩 등 |
| ✅ 안정성 향상           | 장애 발생 시 다른 PoP에서 서비스 가능 |

---

## 5️⃣ CDN의 한계 및 고려사항

| 한계 또는 주의점            | 설명 |
|-----------------------------|------|
| ❌ 실시간 동적 콘텐츠 캐싱 어려움 | 로그인 정보, 사용자 맞춤 데이터는 캐싱 불가 |
| ❌ 캐시 무효화 관리 필요     | 버전 변경, 배포 시 캐시 초기화 설정 주의 |
| ❌ 비용 발생 가능성 있음     | 외부 CDN 서비스는 사용량에 따라 과금 발생 |

---

## 6️⃣ 대표적인 CDN 서비스

| 서비스          | 설명 |
|------------------|------|
| Cloudflare       | 글로벌 캐시 네트워크 + 보안기능 통합 제공 |
| AWS CloudFront   | AWS와 통합되어 자동화된 배포 가능 |
| Akamai           | 전통적인 CDN 강자, 대기업용 |
| Fastly           | 빠른 캐시 퍼지와 동적 캐싱에 강점 |
| Naver Cloud CDN  | 국내 트래픽에 강한 최적화 제공 |

---

## 7️⃣ 적용 사례

| 상황                           | CDN 적용 이유 |
|--------------------------------|---------------|
| 글로벌 사용자 대상 서비스       | 지역 간 지연 최소화 |
| 대용량 이미지/동영상 제공 서비스 | 대역폭 절감 + 빠른 응답 |
| 웹사이트 속도 개선 필요         | Time to First Byte 단축 |
| DDoS 대응 필요                  | 네트워크 레벨 보안 기능 활용 |

---

## 🎯 정리 요약

✔ **CDN은 콘텐츠를 사용자 가까운 서버에서 제공하는 네트워크 기술**  
✔ 웹 성능 향상, 서버 부하 감소, 글로벌 서비스 최적화에 매우 유용  
✔ Cloudflare, CloudFront, Fastly 등 다양한 CDN 서비스 존재  
✔ 정적 콘텐츠 중심으로 사용, 캐시 무효화/동적 콘텐츠 예외 관리 중요  

