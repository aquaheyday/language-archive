# 🧭 시스템 설계 - 성능 모니터링 (Performance Monitoring)

**성능 모니터링(Performance Monitoring)** 은 시스템, 애플리케이션, 인프라 등의 상태를 지속적으로 관찰하고,  
장애 예방과 성능 개선을 위해 **지표를 수집하고 시각화, 경고, 분석**하는 과정입니다.

---

## 1️⃣ 성능 모니터링이란?

| 항목     | 설명 |
|----------|------|
| **정의** | 시스템의 주요 자원(CPU, 메모리, 네트워크 등) 및 애플리케이션의 동작 상태를 **지속적으로 수집/분석/시각화**하는 것 |
| **목적** | - 성능 병목 파악<br>- 장애 조기 감지<br>- 이상 탐지 및 자동 대응<br>- 용량 계획(Capacity Planning) |

---

## 2️⃣ 모니터링 주요 대상 지표

### 🖥️ 인프라 지표 (System Metrics)

| 지표         | 설명 |
|--------------|------|
| CPU 사용률     | 과부하 탐지, 스로틀링 여부 확인 |
| 메모리 사용률   | 메모리 누수, OOM 등 탐지 |
| 디스크 I/O     | 느린 I/O 병목 파악 |
| 네트워크 트래픽 | 패킷 유실, 전송 지연 감지 |

### ⚙️ 애플리케이션 지표 (App Metrics)

| 지표               | 설명 |
|--------------------|------|
| 요청 수 / 초        | TPS, QPS 측정 |
| 응답 시간           | 평균/최대 지연 시간 |
| 오류율             | HTTP 5xx 비율 등 |
| GC 횟수 / 시간      | Java, Node 등에서 중요 |
| 데이터베이스 쿼리 시간 | 슬로우 쿼리 탐지 가능 |

---

## 3️⃣ 대표적인 모니터링 도구

| 도구          | 설명 |
|---------------|------|
| **Prometheus** | 시계열 데이터 수집, Grafana와 연동 |
| **Grafana**    | 시각화 및 대시보드 도구 |
| **Datadog**    | SaaS 기반 통합 모니터링 |
| **New Relic**  | APM + 인프라 + 로그 통합 |
| **Zabbix**     | 온프레미스 인프라 모니터링에 강점 |
| **CloudWatch** | AWS 리소스 모니터링 전용 서비스 |

---

## 4️⃣ 성능 모니터링 구성 요소

| 구성 요소        | 역할 |
|------------------|------|
| **에이전트/익스포터** | 서버/앱의 메트릭을 수집하여 전달 (예: Node Exporter) |
| **수집기**         | 메트릭을 받아 저장하는 서버 (예: Prometheus) |
| **시각화 도구**     | 대시보드 형태로 상태를 보여줌 (예: Grafana) |
| **알림 시스템**     | 임계값 초과 시 Slack, 이메일 등으로 알림 (예: Alertmanager) |
| **로그 수집기**     | 애플리케이션/시스템 로그 통합 수집 (예: Loki, ELK) |

---

## 5️⃣ 실전 모니터링 팁

- 주요 지표에 **Alert Rule** 설정 필수 (예: CPU > 80% 5분 지속 시 알림)
- **서비스 레벨 지표 (SLO/SLA/SLI)** 기준으로 모니터링 설계
- 단순 모니터링 → **AIOps / 이상 탐지 시스템**으로 확장 가능
- 로그/트레이싱과 연계하면 원인 분석까지 가능 (Observability 강화)

---

## 6️⃣ 모니터링과 Observability 차이

| 항목             | 모니터링 (Monitoring)       | 옵저버빌리티 (Observability) |
|------------------|------------------------------|-------------------------------|
| 목적             | 상태 파악 & 알림 중심       | 내부 상태를 추론 가능하도록 구성 |
| 수집 대상        | 메트릭 위주                  | 메트릭 + 로그 + 트레이스      |
| 예시 도구        | Prometheus, Zabbix           | OpenTelemetry, Jaeger, Grafana Tempo |

---

## 🎯 정리 요약

✔ **성능 모니터링은 시스템/앱 상태를 실시간 추적하는 핵심 운영 도구**  
✔ 주요 지표: CPU, 메모리, 응답 속도, 오류율, DB 등  
✔ 도구 조합: Prometheus + Grafana + Alertmanager 구조가 대중적  
✔ SLA/SLO 기반 모니터링 설계 → 실시간 대응 및 분석 용이  
✔ 궁극적으로는 **Observability로 확장**하여 전체 흐름 관찰 가능

