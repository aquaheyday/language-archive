# 🗄️ 시스템 설계 - 스토리지 시스템 (Storage System)

**스토리지 시스템**은 데이터를 **안정적이고 효율적으로 저장/조회/보관**할 수 있도록 구성된 시스템입니다.  
서비스 특성과 규모에 따라 다양한 방식으로 설계되며, **신뢰성, 확장성, 접근 속도, 비용** 등의 요소를 균형 있게 고려해야 합니다.

---

## 1️⃣ 스토리지 시스템이란?

| 항목     | 설명 |
|----------|------|
| **정의** | 데이터를 저장하고, 필요할 때 효율적으로 접근할 수 있도록 지원하는 시스템 |
| **목적** | **데이터의 안정적인 보존**, 빠른 조회, 대용량 처리, 장애 복구 |
| **결과** | 데이터 무결성, 내구성, 고가용성, 성능 최적화 달성

---

## 2️⃣ 스토리지 시스템의 분류

| 유형           | 설명 |
|----------------|------|
| **블록 스토리지**     | OS/파일시스템에서 직접 접근하는 디스크 단위 저장 (ex. AWS EBS) |
| **파일 스토리지**     | 파일 단위 저장, 디렉터리 구조 (ex. NFS, NAS) |
| **오브젝트 스토리지** | 메타데이터 + 데이터로 구성된 객체 단위 저장 (ex. AWS S3, MinIO) |
| **데이터베이스**      | 구조화된 데이터 저장 (ex. MySQL, MongoDB 등) |

---

## 3️⃣ 스토리지 계층 구조 예시

```text
[Application Layer]          # 사용자/서비스가 접근하는 계층
       |
       v
[Storage Interface]          # API, SDK, SQL, 파일 시스템 등
       |
       v
[Storage System]             # 실제 저장 방식 선택
   ├── Block Storage         # 예: Amazon EBS, SSD, iSCSI
   ├── File Storage          # 예: NFS, NAS, SMB
   ├── Object Storage        # 예: Amazon S3, MinIO, GCS
   └── Database Storage      # 예: MySQL, MongoDB, Cassandra
       |
       v
[Physical / Cloud Layer]     # 저장소의 실제 위치
   ├── HDD / SSD             # 물리적 디스크
   ├── RAID Array            # 복구 가능한 디스크 묶음
   ├── Distributed FS        # Ceph, HDFS, GlusterFS 등
   └── Cloud Storage         # AWS, GCP, Azure 등
```

---

## 4️⃣ 스토리지 시스템의 설계 요소

| 요소           | 설명 |
|----------------|------|
| **내구성 (Durability)** | 데이터 손실 없이 오래 보존할 수 있는 능력 |
| **가용성 (Availability)** | 언제든 데이터에 접근할 수 있는 능력 |
| **확장성 (Scalability)** | 저장 용량/처리량 증가에 유연하게 대응 |
| **성능 (Performance)** | 읽기/쓰기 속도, 지연 시간 최소화 |
| **비용 (Cost Efficiency)** | 저장 방식에 따른 비용 최적화 고려 |
| **일관성 (Consistency)** | 데이터가 최신 상태로 동기화되는 정도 |

---

## 5️⃣ 분산 스토리지 시스템

| 요소           | 설명 |
|----------------|------|
| **분산 파일 시스템**  | 여러 서버에 파일을 분산 저장 (ex. HDFS, Ceph, GlusterFS) |
| **데이터 복제**       | 장애 시 대비해 여러 노드에 동일 데이터 복사 |
| **샤딩(Sharding)**     | 데이터 범위 또는 키 기반 분할로 수평 확장 |
| **CAP 이론 고려**     | 일관성, 가용성, 파티션 허용성 간의 트레이드오프 고려 필요 |
| **에러 복구 & 재시도**| 노드 장애 시 자동 복구 매커니즘 필요 |

---

## 6️⃣ 스토리지 기술 예시

| 기술           | 특징 |
|----------------|------|
| **AWS S3**         | 객체 기반, 무제한 확장, 내구성 99.999999999% |
| **Amazon EBS**     | EC2 전용 블록 스토리지 |
| **NFS / NAS**      | 파일 기반 공유 저장소 |
| **Ceph / HDFS**    | 오픈소스 기반 분산 파일 시스템 |
| **Glacier / Coldline** | 장기 보관용 아카이브 스토리지 – 저비용, 느린 접근 |
| **MinIO**          | S3 호환 경량 오브젝트 스토리지 (온프레미스 또는 클라우드 네이티브) |

---

## 7️⃣ 사용 사례별 스토리지 선택

| 사용 사례                   | 적합한 스토리지 |
|-----------------------------|------------------|
| 사용자 프로필, 설정 등 구조화된 데이터 | 관계형 DB (RDS, MySQL 등) |
| 이미지, 영상 업로드           | 오브젝트 스토리지 (S3 등) |
| 대용량 로그 저장 및 분석       | 분산 파일 시스템 (HDFS, GCS 등) |
| 고속 거래 데이터              | 블록 스토리지 (SSD 기반) |
| 장기 보관 데이터 (백업 등)    | 콜드 스토리지 (Glacier, Deep Archive 등) |

---

## 🎯 정리 요약

✔ 스토리지 시스템은 **데이터 보존과 접근 최적화의 핵심 인프라**  
✔ 사용 목적에 따라 블록, 파일, 오브젝트, DB 등 적절한 방식 선택  
✔ 분산 환경에서는 내구성, 복제, 일관성, 확장성 고려 필요  
✔ 클라우드에서는 S3, EBS, Glacier 등 다양한 관리형 옵션 활용 가능
