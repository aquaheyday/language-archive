# 📊 시스템 설계 - 트래픽 추정 (Traffic Estimation)

시스템 설계에서 **트래픽 추정**은 예상되는 사용량을 수치화해 시스템의 용량을 가늠하는 과정입니다.  
이를 통해 **서버 수, DB 용량, 네트워크 대역폭, 캐시 전략** 등을 결정하게 됩니다.

---

## 1️⃣ 트래픽 추정이란?

| 항목     | 설명 |
|----------|------|
| **정의** | 시스템에서 예상되는 **요청 수, 데이터량, 처리량** 등을 수치로 계산하는 작업 |
| **목적** | 성능 병목 방지, 적절한 인프라 규모 산정, 확장 전략 수립 |
| **중요성** | 과소 추정 시 장애 발생, 과대 추정 시 비용 낭비 |

---

## 2️⃣ 주요 추정 항목

| 항목              | 설명 |
|-------------------|------|
| **DAU**           | Daily Active Users (일일 사용자 수) |
| **QPS**           | Queries Per Second (초당 요청 수) |
| **Reads/Writes 비율** | 읽기 vs 쓰기 비율 (예: 90% 읽기 / 10% 쓰기) |
| **데이터 저장량** | 하루/월/년 단위 데이터 생성량 |
| **대역폭(Bandwidth)** | 업로드/다운로드 트래픽 총량 |
| **캐시 적중률**   | 캐시 히트율에 따라 DB 부하 감소 가능 |

---

## 3️⃣ 트래픽 추정 절차

1. 사용자 수 추정 (DAU, MAU)
2. 1인당 평균 요청 수 계산 (페이지 조회, 클릭, 업로드 등)
3. 총 요청 수 계산 → QPS 산출
4. 요청당 데이터 양 분석 (ex. 게시물 = 2KB, 이미지 = 200KB)
5. 저장소 필요 용량, 전송 대역폭 계산
6. 읽기/쓰기 비율 확인 → 캐시, DB 구조 설계 기반

---

## 4️⃣ 트래픽 추정 예시: SNS 피드 서비스

| 항목 | 수치 예시 |
|------|-----------|
| DAU | 100만 명 |
| 1인당 피드 조회 | 20회/일 |
| 총 피드 요청 수 | 100만 × 20 = 2천만 요청/일 |
| 초당 QPS | 2천만 ÷ 86,400 ≒ **231 QPS** |
| 이미지 크기 | 300KB × 20 ≒ 6MB/유저/일 |
| 전체 일간 전송량 | 6MB × 100만 = **6TB/day** |
| DB 저장량 (게시글) | 1건 = 2KB, 하루 500만 건 = 약 **10GB/day** |

---

## 5️⃣ 자주 사용하는 단위

| 단위 | 설명 |
|------|------|
| **QPS** | 초당 요청 수 |
| **RPS** | 초당 응답 수 (QPS와 유사) |
| **MBps / Mbps** | 초당 전송 속도 (Bytes vs bits 주의!) |
| **KB/MB/GB/day** | 일간 저장/전송 단위 |

---

## 6️⃣ 트래픽 추정 시 유의할 점

- 피크 시간 기준으로 여유 있게 추정  
- 읽기 vs 쓰기 요청 비율 고려  
- 캐시 적중률, CDN 사용 여부 반영  
- 실제 사용 데이터를 기반으로 정기적인 리밸런싱 필요

---

## 🎯 정리 요약

✔ 트래픽 추정은 시스템 용량과 구조 설계를 위한 **기초 데이터**  
✔ DAU, QPS, 데이터량, 읽기/쓰기 비율 등 다양한 요소 고려  
✔ 예측 정확도에 따라 성능/비용 최적화가 결정됨  
✔ **잘못된 추정 = 장애 or 낭비**로 직결됨

