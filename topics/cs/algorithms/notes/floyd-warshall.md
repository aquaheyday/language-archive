# 📉 알고리즘 - 플로이드 워셜 (Floyd-Warshall)

**플로이드 워셜 알고리즘**은 **모든 정점 쌍 간의 최단 거리**를 구하는 알고리즘입니다.  
→ 하나의 시작점이 아닌, **모든 노드 쌍에 대해** 최단 거리 계산

---

## 1️⃣ 문제 정의

### 목표:
- **모든 노드 i, j**에 대해 **i → j로 가는 최소 비용** 구하기

### 조건:
- 방향 그래프 or 무방향 그래프 모두 가능
- **음수 간선 허용됨**, 단 **음수 사이클은 X**

---

## 2️⃣ 예시 그래프

### 정점 1 ~ 4, 가중치 있는 방향 그래프

```
   1 → 2 (4)
   1 → 4 (10)
   2 → 3 (3)
   3 → 4 (1)
```

### 결과 (모든 쌍 최단 거리)

| From \ To | 1 | 2 | 3 | 4 |
|-----------|---|---|---|---|
| 1         | 0 | 4 | 7 | 8 |
| 2         | ∞ | 0 | 3 | 4 |
| 3         | ∞ | ∞ | 0 | 1 |
| 4         | ∞ | ∞ | ∞ | 0 |

`∞` → "경로 없음" 을 의미합니다

---

## 3️⃣ 핵심 아이디어

- **중간 노드를 하나씩 거쳐보며** 거리 갱신
- 3중 for문을 사용해 `i → k → j` 경로를 탐색

---

## 4️⃣ 파이썬 코드 예제

```python
INF = float('inf')

def floyd_warshall(n, graph):
    # 거리 초기화
    dist = [[INF] * (n + 1) for _ in range(n + 1)]
    
    # 자기 자신 거리 0
    for i in range(1, n + 1):
        dist[i][i] = 0

    # 초기 그래프 입력
    for a, b, cost in graph:
        dist[a][b] = cost

    # 점화식: i → j가 k를 거쳐 가는 경우
    for k in range(1, n + 1):
        for i in range(1, n + 1):
            for j in range(1, n + 1):
                dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j])

    return dist
```

### 예제 입력

```python
n = 4
edges = [
    (1, 2, 4),
    (1, 4, 10),
    (2, 3, 3),
    (3, 4, 1)
]

result = floyd_warshall(n, edges)

for i in range(1, n + 1):
    for j in range(1, n + 1):
        print(result[i][j] if result[i][j] != float('inf') else "∞", end=' ')
    print()
```

---

## 5️⃣ 시간 복잡도

`O(N^3)`

- 3중 루프: 모든 정점 쌍(i, j)을 중간점 k를 통해 갱신

> 보통 N ≤ 100 에서 사용 가능 (그래프 크기가 작을 때)

---

## 6️⃣ 주요 포인트 요약

| 항목               | 설명 |
|--------------------|------|
| **모든 쌍 최단 거리** | 단일 시작점 X |
| **음수 간선 허용**     | 음수 사이클은 허용 안 됨 |
| **DP 기반**         | 점화식: `dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j])` |
| **자기 자신 거리**    | `0`으로 초기화 |
| **초기 입력**       | 간선 있는 곳만 비용 입력 |

---

## 🎯 정리 요약

✔ 모든 노드쌍 간 최단 거리 계산 (All Pairs Shortest Path)  
✔ 중간 노드 하나씩 거치며 거리 갱신 (3중 for문)  
✔ 음수 간선은 OK, **음수 사이클은 X**  
✔ 시간복잡도는 `O(N³)`  
✔ **그래프가 작을 때** 유용함 (ex. 100 이하 노드)

