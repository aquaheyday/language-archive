# ♛ 알고리즘 - N-Queen 문제

**N-Queen 문제**는 **N×N 체스판** 위에 **서로 공격하지 않도록 N개의 퀸(Queen)** 을 배치하는 문제입니다.

---

## 1️⃣ 문제 정의

**N개의 퀸을 N×N 체스판 위에 놓을 때**, 서로 **서로 공격하지 않도록 배치하는 경우의 수를 구하라**

### ♟ 퀸의 특징:
- 가로(행), 세로(열)
- 대각선(↘, ↙) 방향으로 **모두 공격 가능**

> 즉, **같은 행, 같은 열, 대각선에 두 퀸이 함께 있으면 안 됨**

---

## 2️⃣ 예시 (N = 4)

### 가능한 배치:

#### 첫 번째 해
```
. Q . .
. . . Q
Q . . .
. . Q .
```

#### 두 번째 해
```
. . Q .
Q . . .
. . . Q
. Q . .
```

- 퀸은 서로 공격하지 않음 → ✅ 유효한 해
- N=4일 때 가능한 경우의 수는 `2`

---

## 3️⃣ 해결 방법: 백트래킹 (Backtracking)

하나씩 퀸을 놓아가며, **놓을 수 없는 위치는 가지치기(Prune)** 하면서 모든 가능한 조합을 탐색

### 핵심 아이디어:

- 퀸은 **한 행에 하나만** 놓을 수 있음 → 각 행마다 퀸을 1개씩 시도
- 각 열, 대각선에 퀸이 있는지 체크하면서 배치
- 배치가 유효하면 다음 행으로 이동, 아니면 백트래킹

> **백트래킹**이란, 가능성이 없는 선택은 더 이상 진행하지 않고 되돌아가는 방식

---

## 4️⃣ 파이썬 예제 코드

```python
def solve_n_queens(n):
    result = 0
    col = [False] * n
    diag1 = [False] * (2 * n - 1)  # ↘ 방향 대각선 (row + col)
    diag2 = [False] * (2 * n - 1)  # ↙ 방향 대각선 (row - col + n - 1)

    def backtrack(row):
        nonlocal result
        if row == n:
            result += 1
            return
        for c in range(n):
            if col[c] or diag1[row + c] or diag2[row - c + n - 1]:
                continue
            col[c] = diag1[row + c] = diag2[row - c + n - 1] = True
            backtrack(row + 1)
            col[c] = diag1[row + c] = diag2[row - c + n - 1] = False

    backtrack(0)
    return result

print(solve_n_queens(8))  # 출력: 92
```

---

## 5️⃣ 시간 복잡도

- 최악의 경우: `O(N!)` (모든 위치를 다 시도)
- 하지만 백트래킹으로 **가지치기를 통해 많이 줄어듦**

---

## 6️⃣ 주요 포인트

| 항목            | 설명 |
|------------------|------|
| 행(row)은 반복문으로 진행함 (1개씩 배치) | 퀸은 한 행에 하나씩만 배치되므로, 각 행마다 반복문을 통해 퀸을 배치합니다. |
| 열(col), 대각선 체크로 유효성 검사 | 퀸을 배치할 때, 같은 열이나 대각선에 다른 퀸이 있는지 확인하여 유효한 위치인지 검사합니다. |
| 유효하지 않으면 백트래킹 (가지치기) | 유효하지 않은 배치는 더 이상 진행하지 않고 이전 단계로 돌아가 다른 위치를 시도합니다. 이를 통해 불필요한 탐색을 줄입니다. |
| 가능한 배치 수를 카운트하거나, 실제 배치를 저장할 수도 있음 | 모든 유효한 배치의 수를 세거나, 각 배치의 구체적인 위치를 저장하여 출력할 수 있습니다. |

---

## 🎯 정리 요약

✔ N×N 체스판에 **서로 공격하지 않는 N개의 퀸 배치**  
✔ 백트래킹으로 **한 행씩 퀸을 배치 + 유효성 체크**  
✔ 핵심은 **열/대각선에 퀸이 있는지 여부를 빠르게 판단**  
✔ 시간복잡도는 최악 `O(N!)`지만, **가지치기로 훨씬 빠르게 동작**

