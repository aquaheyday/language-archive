# 🔗 유니온 파인드 알고리즘 (Union-Find / Disjoint Set)

**유니온 파인드 알고리즘**은 여러 개의 원소가 있을 때, **서로 같은 집합(그룹)에 속하는지 판별하거나**,  
**두 집합을 하나로 합치는 연산**을 빠르게 수행하는 자료구조입니다.

> 대표적인 용도는 사이클 판별, 네트워크 연결 여부, 최소 스패닝 트리(Kruskal 알고리즘) 등입니다.

---

## 1️⃣ 문제 정의

### 목표:
- **원소들이 같은 그룹(집합)** 에 속해 있는지 여부를 빠르게 판별
- **서로 다른 두 집합을 합치기**

### 조건:
- 집합 간 구조는 동적이며, 병합(Union)과 조회(Find)가 자주 발생
- 원소는 `0~N` 또는 `1~N` 번호로 식별

---

## 2️⃣ 핵심 연산

| 연산        | 설명                                   |
|-------------|----------------------------------------|
| `find(x)`   | x가 속한 **집합(루트)**을 반환 (부모 탐색) |
| `union(a,b)`| a와 b가 속한 **집합을 합침**              |

> 최적화를 위해 **경로 압축(Path Compression)**, **랭크/사이즈 기준 병합(Union by Rank/Size)** 을 함께 사용

---

## 3️⃣ 예시

초기 상태 (1~5):  
- 각 노드는 자기 자신이 루트  
→ `1  2  3  4  5`

`union(1, 2)` → `1-2` 연결  
`union(3, 4)` → `3-4` 연결  
`union(2, 4)` → `1-2-3-4` 하나로 연결됨  

---

## 4️⃣ 파이썬 코드 예제

```python
# 유니온 파인드 기본 구현 (Disjoint Set Union - DSU)

# find(x):
# x의 루트(대표 노드)를 재귀적으로 찾아 반환
# 경로 압축(Path Compression)을 사용해 트리를 납작하게 만들어줌
def find(parent, x):
    if parent[x] != x:
        parent[x] = find(parent, parent[x])  # 부모를 루트로 갱신
    return parent[x]

# union(a, b):
# a가 속한 집합과 b가 속한 집합을 하나로 합침
# 두 노드의 루트를 찾아, 작은 쪽 루트가 부모가 되도록 병합
def union(parent, a, b):
    rootA = find(parent, a)
    rootB = find(parent, b)
    if rootA < rootB:
        parent[rootB] = rootA
    else:
        parent[rootA] = rootB

# 초기화
n = 5  # 노드 수 (1번부터 5번까지)
# 처음에는 모든 노드가 자신을 부모로 가지므로 각각이 독립된 집합
parent = [i for i in range(n + 1)]  # 0번은 무시하고 1~5번까지 사용

# 유니온 연산 수행
union(parent, 1, 2)  # 1과 2를 같은 집합으로
union(parent, 3, 4)  # 3과 4를 같은 집합으로
union(parent, 2, 4)  # 2와 4를 연결 → 결국 1,2,3,4는 모두 같은 집합이 됨

# 결과 확인
# 각 노드의 루트(대표 노드)를 출력 → 집합 구성을 확인 가능
print([find(parent, i) for i in range(1, n + 1)])

```

---

## 5️⃣ 시간 복잡도

- **`O(α(N))`** — 거의 **`O(1)`** 에 가까움
- `α(N)`: 아커만 함수의 역함수 (매우 느리게 증가)

---

## 6️⃣ 주요 포인트 요약

| 항목               | 설명                                    |
|--------------------|-----------------------------------------|
| 그룹 판별 방식      | 루트 노드 비교 (`find`)                 |
| 병합 방식           | 작은 루트에 큰 루트 연결 (`union`)      |
| 최적화 적용 여부     | ✔ 경로 압축, ✔ 랭크 병합                 |
| 주 사용처           | 크루스칼, 사이클 검사, 연결 여부 판단 등 |

---

## 🎯 정리 요약

✔ 유니온 파인드는 **"집합의 연결 여부"** 를 판별하는 알고리즘  
✔ `find`로 루트 찾고, `union`으로 병합  
✔ 경로 압축으로 매우 빠르게 동작 (거의 O(1))  
✔ **MST (크루스칼), 네트워크 연결성, 사이클 탐지** 등에 필수
