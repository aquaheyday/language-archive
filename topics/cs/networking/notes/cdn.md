# 🚀 CDN (Content Delivery Network) & 캐시(Cache)

**CDN은 전 세계 여러 위치에 있는 서버를 통해 콘텐츠를 빠르게 전달하는 네트워크이고,  
캐시는 자주 사용하는 데이터를 임시로 저장하여 빠르게 불러오는 기술입니다.**

---

## 1️⃣ CDN이란?

> **Content Delivery Network**  
전 세계 여러 지점(엣지 서버)에 콘텐츠를 배포해 사용자가 **가장 가까운 서버에서 콘텐츠를 빠르게 전달**받을 수 있도록 하는 기술

| 항목      | 설명 |
|-----------|------|
| 목적      | **지연 최소화**, 속도 향상, 서버 부하 분산 |
| 구성      | 엣지 서버, 오리진 서버, DNS 라우팅 등 |
| 대상      | 정적 콘텐츠 (이미지, JS, CSS), 점점 동적 콘텐츠도 확대 중 |
| 대표 서비스 | Cloudflare, Akamai, AWS CloudFront, Fastly 등 |

---

## 2️⃣ 캐시란?

> **한 번 불러온 데이터를 일정 시간 동안 저장해두고, 다시 요청할 때 빠르게 제공**하는 메커니즘

| 항목      | 설명 |
|-----------|------|
| 목적      | **응답 속도 향상**, 불필요한 요청 방지 |
| 위치      | 브라우저 캐시, 프록시 캐시, CDN 캐시 등 |
| 대상      | 정적 리소스, API 응답, DB 쿼리 결과 등 |
| 제어 방식 | HTTP 헤더 (`Cache-Control`, `Expires`, `ETag`, `Last-Modified`) |

---

## 3️⃣ CDN과 캐시의 관계

- CDN은 자체적으로 **캐시 서버 역할**도 수행함
- 오리진 서버 대신 CDN 서버가 **캐싱된 콘텐츠**를 빠르게 제공
- 사용자 → 가까운 CDN → 캐시 유효 시 바로 응답 → 속도 👍
- 캐시 만료되면 → 오리진 서버에서 콘텐츠 받아와 **재캐시**

---

## 4️⃣ CDN 동작 흐름 예시

1. 사용자가 웹사이트 요청
2. DNS가 사용자를 가장 가까운 CDN 서버로 연결
3. CDN 서버:
   - 캐시 있음 → 캐시된 콘텐츠 전달
   - 캐시 없음 → 오리진 서버에서 받아와 저장 후 전달
4. 이후 동일 요청 시 캐시에서 응답

---

## 5️⃣ 캐시 제어 주요 헤더

| 헤더           | 설명 |
|----------------|------|
| `Cache-Control` | 캐시 정책 설정 (`no-cache`, `max-age`, `public`, `private` 등) |
| `Expires`       | 만료 시간 (HTTP/1.0) |
| `ETag`          | 콘텐츠 버전 식별자, 변경 여부 판단 |
| `Last-Modified` | 마지막 수정 시간, 변경 감지에 사용 |

---

## 6️⃣ CDN + 캐시의 장점

✅ 사용자에게 더 **빠른 응답 시간**  
✅ 원 서버(오리진)의 **부하 감소**  
✅ **대규모 트래픽 분산**  
✅ 콘텐츠 전송 중단 위험 최소화 (장애 시 다른 CDN 서버 활용)  
✅ **SEO, 사용자 경험 개선**  

---

## 7️⃣ 자주 사용하는 CDN + 캐시 활용 예

| 항목               | 설명 |
|--------------------|------|
| 이미지/영상 호스팅 | 전 세계 엣지 서버를 통해 빠르게 로드 |
| JS/CSS 정적 파일   | 오래 캐싱 → 브라우저 속도 향상 |
| API 응답           | CDN 캐시 활용으로 서버 부하 감소 |
| SPA 정적 사이트    | CDN으로 전체 배포 + HTML, 리소스 캐싱 |

---

## 🎯 정리 요약

✔ **CDN**: 전 세계 서버를 통해 콘텐츠를 **가장 가까운 위치에서 빠르게 전달**  
✔ **캐시**: 자주 사용하는 콘텐츠를 임시 저장해 **응답 속도 향상**  
✔ CDN은 **캐시 서버로도 동작**, 오리진 요청 최소화  
✔ HTTP 헤더로 캐시 전략 설정 가능 (`Cache-Control`, `ETag` 등)  
✔ **속도, 안정성, 비용 절감**까지 챙길 수 있는 핵심 기술 조합
