# 🌐 ARP (Address Resolution Protocol)

**ARP는 IP 주소에 대응되는 MAC 주소를 찾기 위한 프로토콜로, 같은 네트워크(LAN) 내에서 통신하기 위해 필수적인 역할을 합니다.**

---

## 1️⃣ ARP 개요

| 항목       | 내용 |
|------------|------|
| 목적       | IP 주소를 이용해 **MAC 주소를 알아내기 위함** |
| 계층 위치  | **인터넷 계층과 데이터링크 계층 사이** (OSI 3 ↔ 2 계층) |
| 작동 범위  | 같은 네트워크 내 (브로드캐스트 범위) |
| 사용 시점  | 데이터 전송 전에 목적지 MAC 주소를 모를 때 |
| 관련 프로토콜 | IP, Ethernet |

---

## 2️⃣ ARP 작동 방식

#### ARP 요청 (Request)
- 송신자가 목적지 IP 주소는 알지만, MAC 주소는 모를 때
- 네트워크에 **브로드캐스트**(모두에게) 요청 전송  
  → "192.168.0.10 가진 MAC 주소 누구야?"

#### ARP 응답 (Reply)
- 대상 IP를 가진 장비가 자신의 MAC 주소를 응답으로 전송  
  → "나야, MAC은 00:1A:2B:3C:4D:5E야!"

➡ 이후 MAC 주소가 **ARP 캐시(테이블)** 에 저장되어 일정 시간 동안 재사용됨

---

## 3️⃣ ARP 패킷 구조 (간단히)

| 필드 | 설명 |
|------|------|
| Hardware Type | 이더넷(1) 등 |
| Protocol Type | IPv4(0x0800) |
| Operation | 요청(1), 응답(2) |
| Sender MAC/IP | 요청자 정보 |
| Target MAC/IP | 응답 대상 정보 |

---

## 4️⃣ ARP 캐시 (ARP Table)

- 장비가 최근 ARP 결과를 저장해두는 일시 저장소
- 중복 요청 방지 및 속도 향상
- 일반적으로 몇 분 후 만료되며, `arp -a` 명령어로 확인 가능 (Windows/Unix)

---

## 5️⃣ ARP 관련 이슈

#### ARP Spoofing (위조 공격)
- 공격자가 **가짜 ARP 응답**을 보내 MAC ↔ IP 매핑을 조작
- 네트워크 중간자 공격(MITM)의 기반이 됨
- 방어 방법: **동적 ARP 검사(DAI), 정적 ARP 설정, 보안 스위칭**

---

## 🎯 정리 요약

✔ **ARP는 IP → MAC 주소 매핑을 위한 필수 프로토콜**  
✔ **같은 네트워크 내**에서 브로드캐스트 방식으로 동작  
✔ 결과는 **ARP 캐시**에 저장해 효율 향상  
✔ 보안 위협으로는 ARP 스푸핑이 존재  
✔ ARP 없이 LAN 내 IP 기반 통신은 불가능
