# 🌐 DNS (Domain Name System)

**DNS(Domain Name System)는 사람이 이해하기 쉬운 도메인 주소를 컴퓨터가 이해할 수 있는 IP 주소로 변환해주는 시스템입니다.**  
웹사이트 접속 시, `www.example.com` → `93.184.216.34` 로 변환하는 것이 DNS의 역할입니다.

---

## 1️⃣ DNS란?

| 항목       | 설명 |
|------------|------|
| 전체 이름   | Domain Name System |
| 역할       | 도메인 이름 ↔ IP 주소 변환 |
| 계층 구조   | 루트 → TLD → 도메인 → 서브도메인 |
| 관련 포트   | UDP 53 (일반 질의), TCP 53 (대용량 응답 시) |
| 작동 계층   | OSI 7계층 중 **응용 계층** |

---

## 2️⃣ DNS 작동 순서

> 사용자가 웹사이트 주소를 입력했을 때 발생하는 과정

1. **브라우저 캐시** 확인 (과거 접속 기록)
2. **운영체제 캐시** 확인 (OS level DNS cache)
3. **로컬 DNS 서버(Recursive Resolver)** 에 질의
4. 로컬 DNS 서버가 없으면, 루트 DNS 서버로 요청 전파
5. 루트 → TLD → 권한 DNS 서버 순으로 질의 진행
6. 최종 IP 주소 응답 받아 브라우저에 전달
7. 브라우저가 해당 IP로 접속 시도

---

## 3️⃣ DNS 구성 요소

| 구성 요소              | 설명 |
|------------------------|------|
| **도메인 네임(Domain Name)** | 사람이 읽기 쉬운 주소 (ex. google.com) |
| **IP 주소**             | 컴퓨터가 인식하는 주소 (ex. 142.250.206.142) |
| **DNS 클라이언트**       | 질의를 보내는 측 (보통 웹 브라우저) |
| **DNS 서버**           | 요청을 처리하는 서버 (캐시/재귀/권한) |

---

## 4️⃣ DNS 서버의 종류

| 종류                    | 역할 |
|-------------------------|------|
| **Recursive Resolver**  | 사용자의 요청을 받아 대신 찾아주는 서버 (ISP 제공) |
| **Root DNS 서버**       | TLD 서버의 위치를 알려주는 최상위 서버 |
| **TLD 서버**            | `.com`, `.net`, `.org` 등 상위 도메인을 담당 |
| **Authoritative 서버** | 최종 도메인(IP) 정보를 가지고 있는 서버 (소유자 관리) |

---

## 5️⃣ DNS의 특징

- **계층적 구조**: 트리 구조로 상위 → 하위로 질의 진행
- **캐싱(Caching)**: 성능 향상을 위해 중간 응답 결과를 저장
- **UDP 사용**: 속도 중시, 단 큰 응답은 TCP 사용
- **TTL(Time To Live)**: 캐시된 정보의 유효 시간

---

## 6️⃣ DNS 관련 보안 이슈

| 공격 유형         | 설명 |
|------------------|------|
| DNS 스푸핑       | 가짜 IP 응답으로 사용자를 악성 사이트로 유도 |
| DNS 하이재킹     | DNS 설정을 조작하여 트래픽 유도 또는 피싱 |
| DNS 증폭 공격    | 작은 요청으로 대용량 응답 유도 → DDoS 공격에 악용 |

---

## 7️⃣ 자주 쓰는 명령어

```bash
nslookup example.com       # 도메인에 대한 IP 주소 확인
dig example.com            # DNS 질의 상세 확인
ipconfig /flushdns         # 윈도우 캐시 삭제
```

---

## 🎯 정리 요약

✔ **DNS는 도메인 이름을 IP 주소로 변환**하는 인터넷 전화번호부  
✔ 요청 시 **캐시 → 재귀 → 루트 → TLD → 권한 서버 순**으로 조회  
✔ **UDP 53번 포트 사용**, 대형 응답 시 TCP 전환  
✔ **Recursive, Authoritative, Root, TLD** 등 다양한 DNS 서버 존재  
✔ 성능과 보안을 위해 **캐싱, TTL, DNSSEC** 등의 기술 사용
