# 🔐 인증 흐름 (Authentication Flow)

**인증(Authentication)** 은 사용자가 **자신의 신원을 증명**하여 시스템에 접근할 수 있도록 하는 절차

---

## 1️⃣ 기본 인증 흐름 (ID/PW 기반)

사용자 → ID/PW 입력 → 서버 전송 → 서버: 사용자 정보 확인 → ✅ 인증 성공 or ❌ 인증 실패

#### 자세한 단계

1. 사용자가 **아이디 / 비밀번호 입력**
2. 클라이언트가 서버에 **인증 요청 전송** (예: POST `/login`)
3. 서버가 DB에서 사용자 정보 조회
4. 입력한 비밀번호를 해시화하여 저장된 해시와 비교
5. 일치하면 인증 성공 → **세션 또는 토큰 발급**
6. 실패 시 에러 반환 (예: "비밀번호가 틀렸습니다")

---

## 2️⃣ 인증 성공 후: 세션 or 토큰 발급

| 방식          | 설명 |
|---------------|------|
| ✅ **세션 (Session)** | 서버가 세션 ID를 생성하고 클라이언트에 쿠키로 전달 |
| ✅ **JWT (Token)** | 서버가 서명된 토큰을 발급 → 클라이언트가 저장 후 요청 시 헤더에 포함 |

---

## 3️⃣ 인증 흐름 예시 (JWT 기반)
```
[사용자]
   │ 입력 (ID/PW)
   ▼
[클라이언트]
   │ POST /login
   ▼
[서버]
   │ DB에서 사용자 정보 조회
   │ 비밀번호 해시 비교
   ▼
(성공 시)
   │ JWT 발급
   ▼
[클라이언트]
   │ JWT 저장 (로컬 스토리지 등)
   │ 이후 요청 시 Authorization 헤더에 포함
   ▼
[서버]
   │ JWT 유효성 검사 → 요청 처리
```

---

## 4️⃣ 인증 방식 종류

| 인증 방식             | 설명 |
|------------------------|------|
| ✅ **기본 인증**          | ID/PW 입력 방식 (가장 흔함) |
| ✅ **OTP 인증**           | 일회용 비밀번호 (SMS, 이메일) |
| ✅ **2단계 인증 (2FA)**   | ID/PW + OTP, 기기 인증 등 |
| ✅ **소셜 로그인 (OAuth)**| Google, Naver, Kakao 등 외부 인증 |
| ✅ **생체 인증**          | 지문, 얼굴 인식 등 |

---

## 5️⃣ 인증 실패 시 처리

- ❌ 입력 정보 오류 → 에러 메시지 반환
- ❌ 로그인 실패 반복 → 계정 잠금, CAPTCHA 적용
- ❌ 서버 오류 → 인증 처리 실패

---

## 🎯 정리

✔ 인증 = **신원 확인**  
✔ ID/PW → 서버 → 검증 → 세션/토큰 발급  
✔ JWT는 무상태(stateless) 인증 방식  
✔ OTP, 2FA, 생체 인증 등으로 보안 강화 가능
