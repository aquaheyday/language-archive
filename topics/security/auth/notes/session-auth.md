# 🗂️ 세션 기반 인증 (Session-based Authentication)

**세션 기반 인증**은 사용자가 로그인하면, 서버가 **사용자 상태(세션)를 기억**하고, 클라이언트는 **세션 ID**를 통해 인증을 유지하는 방식

---

## 1️⃣ 인증 흐름

1. 사용자가 로그인 요청 (ID/PW 입력)
2. 서버가 사용자 정보 확인 후 **세션 생성**
3. **세션 ID를 클라이언트에 쿠키로 전달**
4. 이후 요청마다 **쿠키에 담긴 세션 ID**를 서버에 전송
5. 서버는 세션 저장소에서 사용자 상태 확인 후 요청 처리

```
[클라이언트]
    │  로그인 요청 (ID/PW)
    ▼
[서버]
    │  사용자 정보 확인
    │  세션 생성 → 세션 ID 발급
    ▼
[클라이언트]
    │  세션 ID 쿠키 저장
    ▼
(이후 요청 시)
    │  세션 ID 포함 요청
    ▼
[서버]
    │  세션 저장소에서 사용자 상태 확인
    │  요청 처리
```

---

## 2️⃣ 특징

| 항목               | 설명 |
|--------------------|------|
| ✅ 상태 유지 방식       | 서버가 사용자 상태(세션) 저장 |
| ✅ 인증 유지 방식       | 세션 ID를 통해 인증된 상태 유지 |
| ✅ 저장 위치           | 서버 메모리, DB, Redis 등 |
| ✅ 클라이언트 역할      | 세션 ID 쿠키 보관 및 전송 |
| ✅ 보안 위험           | 세션 탈취(Session Hijacking) 위험 |
| ✅ 로그아웃 처리 용이   | 서버에서 세션만 삭제하면 됨 |

---

## 3️⃣ 세션 vs 쿠키 vs 토큰

| 구분       | 설명 |
|------------|------|
| 세션(Session) | 서버에 저장되는 사용자 상태 정보 |
| 쿠키(Cookie)   | 클라이언트가 보관하는 키/값 저장소, 세션 ID 저장 용도 |
| 토큰(Token)    | 서버 상태를 저장하지 않고, 토큰으로 인증 (JWT 기반 인증 등) |

---

## 4️⃣ 보안 고려 사항

| 항목                  | 설명 |
|------------------------|------|
| ✅ HTTPS 사용            | 세션 ID 탈취 방지 |
| ✅ HttpOnly 설정         | JS에서 쿠키 접근 제한 (XSS 방어) |
| ✅ Secure 설정           | HTTPS에서만 쿠키 전송 |
| ✅ 세션 만료 시간 설정    | 일정 시간 후 자동 로그아웃 처리 |
| ✅ 세션 저장소 관리       | 분산 서버 환경에서는 Redis 같은 외부 저장소 필요 |

---

## 🎯 정리

✔ 서버가 **상태(state)를 기억**  
✔ 클라이언트는 **세션 ID를 쿠키에 저장**  
✔ 세션 ID로 인증 상태 유지  
✔ 로그아웃, 만료, 강제 삭제 등 제어 쉬움  
✔ 세션 탈취 방지 위해 **HTTPS + 보안 쿠키 필수**  
