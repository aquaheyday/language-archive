# 🆚 JWT vs 세션 기반 인증

**JWT (JSON Web Token)** 과 **세션 기반 인증(Session-based Auth)** 은 웹 인증에서 널리 사용되는 두 가지 방식입니다.

- 공통점: 둘 다 로그인 후 인증 상태 유지에 사용됨  
- 차이점: 상태 저장 방식, 서버 역할, 확장성, 보안 처리 등

---

## 1️⃣ 인증 흐름 비교

### 1) 세션 기반

1. 로그인 요청 → 서버가 사용자 확인
2. 서버가 세션 생성 → 세션 ID를 쿠키로 전달
3. 클라이언트는 쿠키로 인증 유지
4. 서버는 세션 저장소에서 사용자 상태 확인

---

### 2) JWT 기반

1. 로그인 요청 → 서버가 사용자 확인
2. 서버가 JWT(서명된 토큰) 발급
3. 클라이언트가 JWT 저장 (`localStorage`, `cookie` 등)
4. 요청 시 `Authorization: Bearer <JWT>` 포함
5. 서버는 JWT만 보고 인증 판단 (상태 저장 없음)

---

## 2️⃣ 구조 비교

| 항목           | 세션 기반 인증                      | JWT 기반 인증                       |
|----------------|--------------------------------------|--------------------------------------|
| 상태 관리       | ✅ 서버가 세션 상태 저장               | ❌ 서버는 상태 저장하지 않음 (Stateless) |
| 인증 수단       | 세션 ID (쿠키)                        | JWT (Authorization 헤더 등)          |
| 저장 위치       | 서버 (세션 정보) + 클라이언트(쿠키)   | 클라이언트(localStorage, 쿠키 등)    |
| 확장성          | 서버 간 세션 공유 필요 (복잡)         | 확장 용이 (무상태 구조)               |
| 로그아웃 처리    | 서버에서 세션 삭제                    | 어렵다 (토큰은 만료 전까지 유효)       |
| 위변조 방지      | 서버가 세션을 직접 관리                | 서명(Signature) 기반 검증              |

---

## 3️⃣ 장단점 비교

| 구분     | 세션 기반 인증                    | JWT 기반 인증                       |
|----------|-----------------------------------|--------------------------------------|
| ✅ 장점   | 서버 제어 쉬움, 보안적 제어 가능       | 확장성 우수, 빠른 응답, 상태 저장 불필요 |
| ❌ 단점   | 서버 메모리/스토리지 필요, 확장 어려움  | 토큰 탈취 시 로그아웃 어렵고 민감정보 노출 가능 |

---

## 4️⃣ 보안 관련 차이

| 항목            | 세션 기반                 | JWT 기반                    |
|-----------------|----------------------------|-----------------------------|
| CSRF 대응       | 쿠키 사용 시 주의 필요      | `Authorization` 헤더 사용 시 안전 |
| XSS 대응       | `HttpOnly` 쿠키 설정 필수    | `localStorage` 사용 시 XSS 위험   |
| 만료 처리       | 서버에서 세션 만료 가능      | exp 클레임으로 토큰 자체에 명시   |
| 위변조 방지     | 서버 관리로 위변조 거의 불가 | 서명 검증 필수 (Signature)        |

---

## 5️⃣ 선택 기준 요약

| 상황                        | 추천 방식      |
|-----------------------------|----------------|
| 서버가 인증 상태 직접 제어해야 함 | 세션 기반 인증  |
| 서비스가 대규모, 확장형 아키텍처  | JWT 기반 인증   |
| 모바일 앱, SPA 환경           | JWT 선호        |
| 로그아웃/접속 종료 관리 중요     | 세션 선호        |

---

## 🎯 정리

✔ 세션 → **서버가 상태 기억**, 쿠키로 세션 ID 관리  
✔ JWT → **서버는 기억 안함**, 토큰 자체에 정보 포함  
✔ JWT는 확장성, 세션은 제어력  
✔ 보안은 저장 위치 + 전송 방식 + 만료 처리에 따라 다름
