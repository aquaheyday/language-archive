# 🔁 리플레이 공격 (Replay Attack)

**리플레이 공격**은 네트워크 통신에서 유효한 데이터를 가로채 그대로 **다시 전송(재생)** 하여 권한을 탈취하거나 인증을 우회하는 공격 기법

---

## 1️⃣ 특징

- **유효한 요청**을 **가로채서 재전송**
- 인증 정보나 결제 요청 등 민감한 트래픽이 대상이 됨
- 요청 자체는 유효하므로 **시스템이 쉽게 속을 수 있음**
- 사용자가 **다시 로그인하지 않았는데도 요청이 처리됨**

---

## 2️⃣ 공격 시나리오 예시

1. 사용자가 서버에 로그인 → 서버가 인증 토큰 발급  
2. 공격자가 해당 인증 요청 패킷을 **가로채 저장**
3. 나중에 그 요청을 **다시 서버로 전송**
4. 서버는 유효한 요청으로 인식 → **인증 우회 성공**

> 예: 사용자가 결제를 요청했을 때, 공격자가 동일한 요청을 재전송하여 **중복 결제 유도**

---

## 3️⃣ 공격 대상

| 대상              | 설명 |
|-------------------|------|
| ✅ 인증 토큰         | 로그인/세션 유지용 토큰  
| ✅ 결제/거래 요청     | 금전적 피해 가능  
| ✅ API 호출         | 정당한 사용자인 척 호출  
| ✅ 로그인 정보       | 타이밍 맞으면 로그인 없이 접근 가능

---

## 4️⃣ 방어 방법

| 방법                         | 설명 |
|------------------------------|------|
| ✅ **타임스탬프 사용**          | 요청 시간 확인 → 오래된 요청은 거부  
| ✅ **Nonce (1회용 난수)**      | 같은 요청이 **한 번만 유효**  
| ✅ **세션 토큰 관리**           | 요청마다 다른 토큰 사용  
| ✅ **TLS(암호화 통신)**        | 중간자 공격으로부터 패킷 보호  
| ✅ **요청 ID 추적**             | 중복된 요청을 감지하고 차단  

---

## 5️⃣ 관련 개념 비교

| 공격 종류        | 설명 |
|------------------|------|
| **리플레이 공격**     | 유효한 요청을 **그대로 재전송**  
| **스푸핑 공격**       | 사용자를 **위장**하여 인증 우회  
| **브루트포스 공격**   | 모든 조합 시도 → 암호 추측  
| **사전 공격**         | 자주 쓰는 값 리스트로 공격 시도  

---

## 🎯 정리

✔ 유효한 요청을 **중간에서 가로채 재전송**  
✔ 서버는 정상 요청으로 인식 → **위험**  
✔ **Nonce / Timestamp / TLS** 등으로 방어  
✔ 인증, 결제, API 보안에서 매우 중요
