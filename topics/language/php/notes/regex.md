# 🔎 PHP 정규 표현식(Regular Expressions)

정규 표현식(Regex)은 **문자열에서 특정 패턴을 검색하거나 치환할 때 사용하는 문법**입니다.  
PHP에서는 `preg_`로 시작하는 함수들을 통해 정규식을 사용할 수 있으며 이메일 검사,전화번호 형식 확인,특정 문자 제거 등에 널리 사용됩니다.

---

## 1️⃣ 정규 표현식 함수 목록

| 함수               | 설명                                 |
|--------------------|--------------------------------------|
| `preg_match()`     | 정규식과 일치하는 **1개 항목 검색**   |
| `preg_match_all()` | 정규식과 일치하는 **모든 항목 검색** |
| `preg_replace()`   | 일치하는 부분을 **치환**             |
| `preg_split()`     | 정규식을 기준으로 **문자열 분리**     |

---

## 2️⃣ 기본 사용 예제
`/패턴/` 형식으로 정규식 작성   

```php
<?php
$text = "PHP is awesome!";
if (preg_match("/PHP/", $text)) {
    echo "PHP가 포함되어 있습니다.";
}
?>
```

✔ 대소문자 구분 (기본값) → `/php/i` 로 `i` 플래그를 사용하면 구분하지 않음  

---

## 3️⃣ 문자 클래스 및 패턴 기호

| 패턴      | 의미                          | 예시             |
|-----------|-------------------------------|------------------|
| `.`       | 임의의 한 문자 (줄바꿈 제외)   | `a.c` → "abc", "axc" |
| `^`       | 문자열의 시작                  | `^abc` → "abcdef" |
| `$`       | 문자열의 끝                    | `xyz$` → "123xyz" |
| `[]`      | 문자 집합                      | `[aeiou]` → 모음  |
| `[^]`     | 부정 문자 집합                 | `[^0-9]` → 숫자 제외 |
| `|`       | OR 연산자                      | `cat|dog` → 둘 중 하나 |
| `\d`      | 숫자 (0~9)                     | `\d{3}` → 3자리 숫자 |
| `\w`      | 단어 문자 (a-z, A-Z, 0-9, _)   | `\w+` → 연속된 단어 |
| `\s`      | 공백 문자                      | `\s+` → 하나 이상의 공백 |
| `*`       | 0회 이상 반복                  | `a*` → "", "a", "aaa" |
| `+`       | 1회 이상 반복                  | `a+` → "a", "aa" |
| `?`       | 0 또는 1회                     | `a?` → "", "a" |
| `{n}`     | 정확히 n번 반복                | `\d{4}` → 4자리 숫자 |
| `{n,}`    | n번 이상 반복                  | `a{2,}` → 2번 이상 "a" |
| `{n,m}`   | n~m번 반복                     | `\d{2,4}` → 2~4자리 숫자 |

---

## 4️⃣ 이메일 형식 검증 예시
정규식으로 간단한 이메일 검사를 할 수 있습니다.  

```php
<?php
$email = "test@example.com";
if (preg_match("/^[\w\.-]+@[\w\.-]+\.\w+$/", $email)) {
    echo "올바른 이메일 형식입니다.";
} else {
    echo "잘못된 이메일입니다.";
}
?>
```

✔ 완벽한 이메일 검증에는 `filter_var($email, FILTER_VALIDATE_EMAIL)` 권장

---

## 5️⃣ 전화번호 형식 검사 예시 (010-xxxx-xxxx)

```php
<?php
$phone = "010-1234-5678";
if (preg_match("/^010-\d{4}-\d{4}$/", $phone)) {
    echo "유효한 전화번호입니다.";
}
?>
```

✔ `^010-` → 010으로 시작  
✔ `\d{4}-\d{4}` → 4자리 숫자 두 번  

---

## 6️⃣ 문자열 치환 (`preg_replace`)
`preg_replace("패턴", "대체 문자열", 대상)` 형식  

```php
<?php
$text = "Hello, 2024!";
$cleaned = preg_replace("/\d+/", "", $text);
echo $cleaned; // "Hello, !"
?>
```

✔ 숫자 제거, HTML 태그 제거 등에 자주 사용됩니다.  

---

## 7️⃣ 문자열 분리 (`preg_split`)

```php
<?php
$data = "apple, banana, mango";
$fruits = preg_split("/,\s*/", $data);
print_r($fruits);
?>
```

#### 결과:
```php
["apple", "banana", "mango"]
```
 
✔ 쉼표+공백 기준으로 문자열을 배열로 나눕니다.

---

## 8️⃣ 플래그(옵션) 종류

| 플래그 | 설명                           |
|--------|--------------------------------|
| `i`    | 대소문자 구분 안 함            |
| `m`    | 여러 줄 모드 (`^`, `$`가 줄 기준) |
| `s`    | `.`이 줄바꿈 문자도 포함         |
| `u`    | 유니코드 지원 (`UTF-8` 문자열 처리) |

예: `preg_match("/abc/i", "ABC")` → true

---

## 🎯 정리

✔ `preg_match()`로 특정 패턴의 존재 여부를 검사할 수 있습니다.  
✔ `preg_replace()`로 문자열 내 특정 부분을 치환할 수 있습니다.  
✔ 정규 표현식은 `/패턴/플래그` 형식으로 작성하며, `\d`, `\w`, `^`, `$` 등 다양한 기호를 사용할 수 있습니다.  
✔ 실무에서는 이메일, 전화번호, 숫자, 공백 등 다양한 입력 검증에 활용됩니다.  
✔ 복잡한 정규식일수록 테스트를 통해 신중하게 작성하시는 것이 좋습니다.

